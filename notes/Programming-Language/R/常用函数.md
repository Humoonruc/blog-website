| 说明                                                         | 函数名                                                       | 实例                                                         | 备注                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                              |                                                              |                                                              |                                                              |
| **逻辑运算符/函数**                                          |                                                              |                                                              |                                                              |
| 与                                                           | `&` / `magrittr::and()`                                      |                                                              | **以下四个运算符/函数都支持向量化操作的**                    |
| 或                                                           | `|` / `magrittr::or()`                                       |                                                              |                                                              |
| 非                                                           | `!` / `magrittr::not()`                                      |                                                              |                                                              |
| 异或                                                         | `xor()`                                                      | xor(x, y)                                                    | 若x、y均为T或F，返回F；若x、y一为F一为T，返回T               |
| 短路运算与                                                   | `&&`                                                         |                                                              | **以下两个运算符不支持向量化操作**，只能作用于第一个分量     |
| 短语运算或                                                   | `||`                                                         |                                                              |                                                              |
|                                                              |                                                              |                                                              |                                                              |
| 相等                                                         | `==`                                                         | 1==1L 返回 TRUE，前者为 double，后者为 integer               | （自动转换数据类型）值相等                                   |
|                                                              | identical(x, y)                                              | identical(1, 1L) 返回 FALSE                                  | 严格相等，除了数值，数据类型也要一样                         |
|                                                              | `all.equal(a, b)` 或 `dplyr::near(a, b)`                     | > sin(pi) == 0 [1] FALSE > all.equal(sin(pi), 0) [1] TRUE    | 电脑运算浮点有误差，如 sqrt(2)^2==2 返回 FALSE 所以比较浮点数是否相等时，不能使用 `==` all.equal()的可容忍误差是 1.5e-8 |
| 大于和小于                                                   | `>`, `>=`, `<`, `<=`                                         |                                                              |                                                              |
|                                                              |                                                              |                                                              |                                                              |
| 检查x向量中每个元素 是否包含于y                              | `x %in% y` / `magrittr::is_in()`                             |                                                              | 返回一个**与 x 长度相同**的逻辑向量。 当 x 中某元素在 y 中时，返回 T；不在 y 中时，返回 F |
|                                                              |                                                              |                                                              |                                                              |
| 处理缺失值                                                   | is.na()                                                      |                                                              |                                                              |
|                                                              | is.null()                                                    |                                                              |                                                              |
|                                                              |                                                              |                                                              |                                                              |
| 逻辑聚合函数                                                 | any()/all()                                                  |                                                              |                                                              |
| index                                                        | which()                                                      | > x <- c(-2, -3 , 2, 3, 1, 0, 0 , 1 , 2) > which(abs(x) >= 1.5) [1] 1 2 3 4 9 | 返回bool向量中T的位置（返回值可能是一个向量）                |
|                                                              | which.min()、which.max()                                     |                                                              | 返回极值的index                                              |
|                                                              | rank()                                                       |                                                              | 返回元素（从小到大）的次序，相当于先排序再返回index          |
|                                                              |                                                              |                                                              |                                                              |
| **数学函数**                                                 |                                                              |                                                              | 数学函数皆为向量化运算                                       |
| 四则运算                                                     | 包括加、减、乘(*)、除(/)、乘方"^" 除法取整（%/%）、除法取余（%%） | remainder <- 5 %% c(1,2,3,4,5) ## [5] 0 1 2 1 0              |                                                              |
| 对数                                                         | log()/log10()/log2()                                         |                                                              |                                                              |
| 指数                                                         | exp()                                                        |                                                              |                                                              |
| 平方根                                                       | sqrt()                                                       |                                                              |                                                              |
| 绝对值                                                       | abs()                                                        |                                                              |                                                              |
| 阶乘                                                         | factorial()                                                  |                                                              |                                                              |
| 符号                                                         | sign()                                                       | sign(-2:3)                                                   | 正数返回1，0返回0，负数返回-1                                |
| 三角函数                                                     | sin()/cos()/tan()/asin()/acos()/atan()                       |                                                              |                                                              |
| 双曲函数                                                     | sinh/cosh/tanh/asinh/acosh/atanh                             |                                                              |                                                              |
| 圆周率                                                       | pi                                                           |                                                              |                                                              |
|                                                              |                                                              |                                                              |                                                              |
| 不小于x的最小整数                                            | ceiling()                                                    |                                                              |                                                              |
| 不大于x的最大整数                                            | floor()                                                      |                                                              |                                                              |
| 向0的方向截取的x中的整数部分                                 | trunc(x)                                                     |                                                              |                                                              |
| 保留n位小数，四舍五入                                        | round(x,n)                                                   |                                                              |                                                              |
| 保留n位有效数字                                              | signif(x,n)                                                  |                                                              |                                                              |
|                                                              |                                                              |                                                              |                                                              |
| 返回累加和序列                                               | cumsum(vector)                                               | cumsum(1:10)                                                 | 由新增求累计，非常好用的函数                                 |
| 返回累乘积序列                                               | cumprod(vector)                                              | cumprod(1:10)                                                |                                                              |
| 返回累加和的均值序列                                         | dplyr::cummean(vector)                                       | dplyr::cummean(1:10)                                         |                                                              |
|                                                              |                                                              |                                                              |                                                              |
| 一个向量x中k个元素的所有组合                                 | `combn(x, k)`                                                | `combn(letters[1:4], 2)`                                     | 返回 matrix                                                  |
| 两个向量对应元素的所有排列                                   | `expand.grid(x1, x2)  `                                      | `expand.grid(n = c(1, 2, 3), x = c("a", "b"))  `             | 返回 data.frame                                              |
|                                                              |                                                              |                                                              |                                                              |
| **解方程和微积分**                                           |                                                              |                                                              |                                                              |
| 解多项式方程                                                 | polyroot(从常数项到最高阶的系数向量)                         | > polyroot(c(-2, 1, 1)) [1] 1-0i -2+0i                       | 求 0=-2+x+x^2 的解                                           |
| 提取复数的实数部分                                           | Re()                                                         | > Re(polyroot(c(-2, 1, 1))) [1] 1 -2                         |                                                              |
| 在一定区间上求任意方程的近似解  一般流程： 先画图，看看根所在的大致区间，再用迭代法求近似解 | uniroot(求解函数，查找区间)                                  | calY <- function (x) {  exp(x) - 3 * exp(-x ^ 2 + x) + 1 %>% return() } x <- seq(-2, 2, by = 0.001) y <- calY(x) plot(x, y) uniroot(calY, c(-1, 0)) uniroot(calY, c(-0, 2)) uniroot(calY, c(-2, 2)) | 求 e^x-3*e^(-x^2+x)+1=0 在 [-2, 2] 上的解 观察图形发现两个解的大概位置，然后在单调区间内分别求解（如果区间包含了两个以上的解，会报错） 返回的列表包含了近似解、近似解处的函数值、迭代次数、根的估计精度等信息 |
| 求原函数的(偏)导函数                                         | D(quote(原函数), "自变量")                                   | > z <- D(quote(sin(x) * cos(x * y)), "x")  > z cos(x) * cos(x * y) - sin(x) * (sin(x * y) * y) |                                                              |
| 导函数在某点的值                                             | eval(导函数, list(自变量的值))                               | > eval(z, list(x = 1, y = 2)) [1] -1.75514                   |                                                              |
| 定积分的数值计算                                             | integrate(积分函数, 自变量下限，自变量上限)                  |                                                              |                                                              |
|                                                              |                                                              |                                                              |                                                              |
| **描述统计**                                                 |                                                              |                                                              |                                                              |
| 显示对象的统计概要                                           | summary()                                                    |                                                              | 显示连续型变量的最小值、最大值、均值和四分位数 显示类别型变量的频数值。 |
| 将连续数据按数值分段                                         | cut(x, breaks, labels = NULL, right = TRUE, …)               | age <- c(55, 12, 30, 9, 22, 24, 78, 109, 45, 66, 49)<br/>cut(age, breaks = c(-Inf, 12, 30, 60, Inf), labels = c("小孩", "青年", "中年", "老年")) | x 为待分段数据，breaks 为几个区间的边界，labels 为各段的标签. 默认各区间左开右闭，令 right=FALSE 则左闭右开。 |
| 统计每个元素的出现次数                                       | table(x)                                                     |                                                              |                                                              |
| 返回对象的最小值、最大值                                     | min()、max()                                                 | min(object, na.rm=TRUE)                                      | na.rm=TRUE这个参数可以去掉所有的缺失值                       |
| 返回对象的极值两端                                           | range()                                                      |                                                              | 用最小值和最大值返回一个长度为2的向量。                      |
| 和、积                                                       | sum()、prod()                                                |                                                              |                                                              |
| 平均值、中位数、方差、标准差                                 | mean(, trim)、median()、var()、sd()                          | mean(x, trim=)                                               | trim的取值在0(0%)到0.5(50%)之间，表示去掉最大的最小的trim比例的数据（认为是异常值），剩下的求平均 |
| 协方差、correlation                                          | cov(x, y), cor(x, y)                                         |                                                              | 接收一个数据框或矩阵时，返回每两列之间的系数矩阵             |
| 绝对中位差(median absolute deviation)                        | mad(x)                                                       |                                                              |                                                              |
| 分位数                                                       | quantile(x,probs)                                            |                                                              | x 为待求分位数的数值型向量 probs 为一个由[0,1]之间的概率值组成的数值向量 |
| 返回最小值、25百分位数、 中位数、75百分位数、最大值          | fivenum()                                                    |                                                              |                                                              |
|                                                              |                                                              |                                                              |                                                              |
| 正态标准化                                                   | scale(x,center=TRUE, scale=TRUE)                             | x可以是一个列向量，也可以是整个矩阵/数据框                   | 为数据对象 x 按列进行中心化(center=TRUE)或标准化(center=TRUE,scale=TRUE) 默认状态下，进行均值为0、标准差为1的标准化 |
|                                                              |                                                              |                                                              |                                                              |
| **抽样**                                                     | sample(vector, size, replace = F, prob)                      |                                                              | replace 默认为 FALSE，不放回抽样 <br />prob为抽样概率权重向量 |
|                                                              | replicate(n, expr)                                           |                                                              | 对第二个参数的表达式重复运行 n 次，n 次运行结果返回向量，常用于产生一个样本 |
|                                                              |                                                              |                                                              |                                                              |
| **分布函数**                                                 | 前缀+具体分布 如runif()可以生成线性随机数 dnorm()为正态密度函数 |                                                              |                                                              |
| 分布前缀字母                                                 |                                                              | d = 密度函数（density） p = 累计分布函数（cumulative distribution function） q = 分位数函数（quantile function） r = 服从某分布的随机变量 |                                                              |
| 各种具体分布                                                 |                                                              | unif 均匀分布 norm 正态分布 pois 泊松分布 binom 二项分布     | 通过 ?Distributions 查询                                     |
| 设定随机数种子                                               | set.seed()                                                   |                                                              |                                                              |
| 生成多元正态数据                                             | MASS::mvrnorm(n, mean, sigma)                                |                                                              | n为样本大小，mean为均值向量，sigma是方差-协方差矩阵（或相关矩阵） 该函数返回一个矩阵 |
|                                                              |                                                              |                                                              |                                                              |
| **统计分析**                                                 |                                                              |                                                              |                                                              |
| lm(y~x, data=df)                                             | 线性回归模型                                                 |                                                              | 回归结果可以保存在一个变量中，稍后可以被显示和继续使用       |
| glm(y~x, data = df)                                          | 广义线性模型                                                 |                                                              |                                                              |
| summary                                                      | 输出模型的更多细节                                           |                                                              |                                                              |
| t.test(x, y)                                                 | 两个向量均值的t检验                                          |                                                              |                                                              |
| pairwise.t.test                                              | 成对数据的t检验                                              |                                                              |                                                              |
| prop.test                                                    | test for a difference between proportions                    |                                                              |                                                              |
| aov                                                          | 方差分析                                                     |                                                              |                                                              |