<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Humoon" />

<meta name="date" content="2022-06-19" />

<title>Vector（广义向量）</title>

<script src="libs/header-attrs-2.14/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/navigation-1.1/codefolding.js"></script>
<script src="libs/navigation-1.1/sourceembed.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>


<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="../css/style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Vector（广义向量）</h1>
<h3 class="subtitle">Atomic Vector, Matrix, List and Dataframe</h3>
<h4 class="author">Humoon</h4>
<h4 class="date">2022-06-19</h4>

</div>


<div id="vector-的分类" class="section level2">
<h2>Vector 的分类</h2>
<ol style="list-style-type: decimal">
<li>atomic vector, matrix, array 都要求单一数据类型 (homogeneous data
type)，<strong>根基是 atomic vector</strong>
<ol style="list-style-type: decimal">
<li>atomic vector 添加维度属性可生成 matrix, array</li>
<li>atomic vector 添加 class 属性可生成 factor, date 和 date-time</li>
</ol></li>
<li>list, data.frame 可以装载不同数据类型 (heterogeneous data
types)，<strong>根基是 list</strong>
<ol style="list-style-type: decimal">
<li>列表<strong>提高了存储的灵活性</strong>，但<strong>降低了存储和运算效率</strong></li>
<li>数据框是一种特殊的列表</li>
</ol></li>
<li>atomic vector 和 list 可统称为 vector</li>
</ol>
<div id="data-types-of-atomic-vector" class="section level3">
<h3>data types of atomic vector</h3>
<div id="logical" class="section level4">
<h4>logical</h4>
<p><code>TRUE</code>/<code>T</code> 和
<code>FALSE</code>/<code>F</code></p>
<p>一些被设定接收逻辑输入的函数也可以接收非逻辑向量，例如数值向量。此时，非逻辑向量会被强制转换成逻辑向量：非零数值会被强制转换成
TRUE，只有 0 会被强制转换成
FALSE；字符串不能被强制转换成逻辑值，会报错。</p>
</div>
<div id="numeric" class="section level4">
<h4>numeric</h4>
<p>统称数值型</p>
<ul>
<li>整数，integer，形如 <code>2L</code></li>
<li>双精度浮点数，double
<ul>
<li>三种特殊情况：Inf, -Inf, NaN.</li>
<li>只要表达式中有正负无穷的项出现，结果就很可能为 Inf, -Inf, NaN</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="dv">1000</span>) <span class="co"># R 中数字的上限为 1.8*10^38，超过这个规模就会出现 Inf </span></span></code></pre></div>
<pre><code>#&gt; [1] Inf</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="dv">10</span> <span class="sc">/</span> <span class="dv">0</span> <span class="co"># -Inf 负无穷</span></span></code></pre></div>
<pre><code>#&gt; [1] -Inf</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="dv">1000</span>) <span class="sc">/</span> <span class="fu">exp</span>(<span class="dv">990</span>) <span class="co"># NaN, not a number</span></span></code></pre></div>
<pre><code>#&gt; [1] NaN</code></pre>
</div>
<div id="charactor" class="section level4">
<h4>charactor</h4>
<p>字符串</p>
</div>
<div id="complex" class="section level4">
<h4>complex</h4>
<p>复数，形如 <code>1+2i</code></p>
</div>
<div id="空值-null-和缺失值-na" class="section level4">
<h4>空值 <code>NULL</code> 和缺失值 <code>NA</code></h4>
<p><code>NULL</code>，零长<strong>向量</strong>，一般表示参数未被赋值，以及函数没有明确返回值时的返回。所属类、数据类型均为
“NULL”</p>
<p><code>NA</code>，长度为 1
的逻辑向量，表示数据（元素）的缺失值。所属类、数据类型均为 “logical”</p>
<p>判断 NULL 和 NA 不能用 <code>==</code>，只能用 <code>is.na()</code>
和 <code>is.null()</code></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>a <span class="co"># 注意控制台的输出没有 [1]，长度连1都没有</span></span></code></pre></div>
<pre><code>#&gt; NULL</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(a)</span></code></pre></div>
<pre><code>#&gt; [1] 0</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(a)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;NULL&quot;</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(a)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;NULL&quot;</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">==</span> <span class="cn">NULL</span> <span class="co"># 返回长度为0的向量，既不是 TRUE 也不是 FALSE</span></span></code></pre></div>
<pre><code>#&gt; logical(0)</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(a)</span></code></pre></div>
<pre><code>#&gt; logical(0)</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>#&gt; [1] NA</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(b)</span></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(b)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(b)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>b <span class="sc">==</span> <span class="cn">NA</span> <span class="co"># NA 进行任何运算都返回 NA</span></span></code></pre></div>
<pre><code>#&gt; [1] NA</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.null</span>(b)</span></code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
</div>
<div id="查看-data-type" class="section level4">
<h4>查看 data type</h4>
<p><code>typeof()</code></p>
<ol style="list-style-type: decimal">
<li>vector、matrix 返回其中元素的 data type</li>
<li>list、data.frame 返回 “list”</li>
</ol>
</div>
</div>
<div id="combine-data" class="section level3">
<h3>combine data</h3>
<p>组合(combine,
一般使用<code>c(..., use.names = TRUE)</code>)不同数据类型的向量或列表时，会强制转换为兼容所有元素的、更灵活的数据类型</p>
<p>一般顺序为：logical&lt;integer&lt;numeric&lt;complex&lt;character&lt;list</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(a, b)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;1&quot; &quot;2&quot; &quot;a&quot; &quot;b&quot;</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>l4 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>))</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>l5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>))</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(l4)</span></code></pre></div>
<pre><code>#&gt; List of 2
#&gt;  $ :List of 2
#&gt;   ..$ : num 1
#&gt;   ..$ : num 2
#&gt;  $ : num [1:2] 3 4</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(l5)</span></code></pre></div>
<pre><code>#&gt; List of 4
#&gt;  $ : num 1
#&gt;  $ : num 2
#&gt;  $ : num 3
#&gt;  $ : num 4</code></pre>
<p><img
src="https://d33wubrfki0l68.cloudfront.net/eb81c70723664f0920d0fd414e3f326b9ad1fa6e/c06ae/diagrams/vectors/list-c.png" /></p>
</div>
<div id="attributes" class="section level3">
<h3>attributes</h3>
<p>属性即作为 metadata 的键值对，附加到对象上</p>
<div id="常用属性" class="section level4">
<h4>常用属性</h4>
<ol style="list-style-type: decimal">
<li>长度,，<code>length()</code>
<ol style="list-style-type: decimal">
<li>vector、matrix 返回其中元素的个数</li>
<li>list 返回键值对个数</li>
<li>数据框返回列数，因为每列（列名:值向量）是 list 的一个键值对</li>
</ol></li>
<li>矩阵、数组和数据框的维度，<code>dim()</code>
<ol style="list-style-type: decimal">
<li>dim(vector) 不是1， 而是 NULL</li>
</ol></li>
<li>names，给每个元素一个 name 的数值向量
<ol style="list-style-type: decimal">
<li><code>names()[&lt;-]</code>/<code>setNames()</code> 获取/设定 names
属性，设置为 NULL 可删除 names 属性</li>
<li><code>unname()</code> 去掉 names
属性（该语句也会生成一个新变量）</li>
<li>从源代码可知，<code>setNames()</code>和<code>unname()</code>是为了配合管道而设计的语法糖，内部调用的还是
<code>names()&lt;-</code></li>
</ol></li>
</ol>
</div>
<div id="处理函数" class="section level4">
<h4>处理函数</h4>
<ul>
<li><code>attr(x, 'a')[&lt;-]</code> get and modify 属性</li>
<li><code>attributes(x)</code> get 全部属性</li>
<li><code>structure(.Data = x, attr1 = values1, attr2 = values2, ...)</code>
整体设置全部属性。但要注意：该语句会生成一个新变量。</li>
</ul>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(a, <span class="st">&quot;roman_index&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;I&quot;</span>, <span class="st">&quot;II&quot;</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>#&gt; [1] 1 2
#&gt; attr(,&quot;roman_index&quot;)
#&gt; [1] &quot;I&quot;  &quot;II&quot;</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(a, <span class="st">&quot;roman_index&quot;</span>) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>#&gt; [1] 1 2</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">structure</span>(<span class="at">.Data =</span> a, <span class="at">roman_index =</span> <span class="fu">c</span>(<span class="st">&quot;I&quot;</span>, <span class="st">&quot;II&quot;</span>))</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>#&gt; [1] 1 2
#&gt; attr(,&quot;roman_index&quot;)
#&gt; [1] &quot;I&quot;  &quot;II&quot;</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(a) <span class="ot">&lt;-</span> b</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(a)</span></code></pre></div>
<pre><code>#&gt; $roman_index
#&gt; [1] &quot;I&quot;  &quot;II&quot;
#&gt; 
#&gt; $names
#&gt; [1] &quot;a&quot; &quot;b&quot;</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(a)</span></code></pre></div>
<pre><code>#&gt;  Named int [1:2] 1 2
#&gt;  - attr(*, &quot;roman_index&quot;)= chr [1:2] &quot;I&quot; &quot;II&quot;
#&gt;  - attr(*, &quot;names&quot;)= chr [1:2] &quot;a&quot; &quot;b&quot;</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>#&gt; a b 
#&gt; 1 2 
#&gt; attr(,&quot;roman_index&quot;)
#&gt; [1] &quot;I&quot;  &quot;II&quot;</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unname</span>(a)</span></code></pre></div>
<pre><code>#&gt; [1] 1 2
#&gt; attr(,&quot;roman_index&quot;)
#&gt; [1] &quot;I&quot;  &quot;II&quot;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>#&gt; a b 
#&gt; 1 2 
#&gt; attr(,&quot;roman_index&quot;)
#&gt; [1] &quot;I&quot;  &quot;II&quot;</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">unname</span>(a)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>#&gt; [1] 1 2
#&gt; attr(,&quot;roman_index&quot;)
#&gt; [1] &quot;I&quot;  &quot;II&quot;</code></pre>
</div>
</div>
<div id="class-属性与-s3-对象" class="section level3">
<h3>class 属性与 S3 对象</h3>
<p>添加 class 属性后，对象将被转换为 S3
对象，传递给泛型函数时将具有独特的行为</p>
<p><img
src="https://d33wubrfki0l68.cloudfront.net/baa19d0ebf9b97949a7ad259b29a1c4ae031c8e2/8e9b8/diagrams/vectors/summary-tree-s3-1.png" /></p>
<div id="factor" class="section level4">
<h4>Factor</h4>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;a&#39;</span>))</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] a b b a
#&gt; Levels: a b</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(x)</span></code></pre></div>
<pre><code>#&gt; $levels
#&gt; [1] &quot;a&quot; &quot;b&quot;
#&gt; 
#&gt; $class
#&gt; [1] &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(x)</span></code></pre></div>
<pre><code>#&gt; x
#&gt; a b 
#&gt; 2 2</code></pre>
<p><img
src="https://d33wubrfki0l68.cloudfront.net/1c19eabc59d445cab78fc605053c7393ec630e15/5843b/diagrams/vectors/factor.png" /></p>
</div>
<div id="date" class="section level4">
<h4>Date</h4>
<p>class 属性：Date</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>today <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>()</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(today)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(today)</span></code></pre></div>
<pre><code>#&gt; $class
#&gt; [1] &quot;Date&quot;</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unclass</span>(today) <span class="co"># 从1970年1月1日算起</span></span></code></pre></div>
<pre><code>#&gt; [1] 19114</code></pre>
</div>
<div id="date-time" class="section level4">
<h4>Date-time</h4>
<p>class 属性：POSIXct</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>now_ct <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">&quot;2018-08-01 22:00&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;UTC&quot;</span>)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>now_ct</span></code></pre></div>
<pre><code>#&gt; [1] &quot;2018-08-01 22:00:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(now_ct)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(now_ct)</span></code></pre></div>
<pre><code>#&gt; $class
#&gt; [1] &quot;POSIXct&quot; &quot;POSIXt&quot; 
#&gt; 
#&gt; $tzone
#&gt; [1] &quot;UTC&quot;</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unclass</span>(now_ct) <span class="co"># 从1970年1月1日算起的秒数</span></span></code></pre></div>
<pre><code>#&gt; [1] 1533160800
#&gt; attr(,&quot;tzone&quot;)
#&gt; [1] &quot;UTC&quot;</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">structure</span>(now_ct, <span class="at">tzone =</span> <span class="st">&quot;Asia/Tokyo&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;2018-08-02 07:00:00 JST&quot;</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">structure</span>(now_ct, <span class="at">tzone =</span> <span class="st">&quot;America/New_York&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;2018-08-01 18:00:00 EDT&quot;</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">structure</span>(now_ct, <span class="at">tzone =</span> <span class="st">&quot;Australia/Lord_Howe&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;2018-08-02 08:30:00 +1030&quot;</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">structure</span>(now_ct, <span class="at">tzone =</span> <span class="st">&quot;Europe/Paris&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;2018-08-02 CEST&quot;</code></pre>
</div>
<div id="duration" class="section level4">
<h4>Duration</h4>
<p>class 属性：difftime</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>one_week_1 <span class="ot">&lt;-</span> <span class="fu">as.difftime</span>(<span class="dv">1</span>, <span class="at">units =</span> <span class="st">&quot;weeks&quot;</span>)</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>one_week_1</span></code></pre></div>
<pre><code>#&gt; Time difference of 1 weeks</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(one_week_1)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(one_week_1)</span></code></pre></div>
<pre><code>#&gt; $class
#&gt; [1] &quot;difftime&quot;
#&gt; 
#&gt; $units
#&gt; [1] &quot;weeks&quot;</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>one_week_2 <span class="ot">&lt;-</span> <span class="fu">as.difftime</span>(<span class="dv">7</span>, <span class="at">units =</span> <span class="st">&quot;days&quot;</span>)</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>one_week_2</span></code></pre></div>
<pre><code>#&gt; Time difference of 7 days</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(one_week_2)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(one_week_2)</span></code></pre></div>
<pre><code>#&gt; $class
#&gt; [1] &quot;difftime&quot;
#&gt; 
#&gt; $units
#&gt; [1] &quot;days&quot;</code></pre>
</div>
</div>
</div>
<div id="atomic-vector" class="section level2">
<h2>Atomic Vector</h2>
<p><strong>注意</strong></p>
<ol style="list-style-type: decimal">
<li>R中无标量，标量被默认为长度为1的向量，所以在控制台显示一个数时，前面仍会有表示向量维度的
<code>[1]</code></li>
<li>R中的向量默认为列向量，不存在行向量。对列向量转置，得到的是一个<span
class="math inline">\(1\times n\)</span>的矩阵</li>
<li>R中的基础运算都是向量化的</li>
</ol>
<div id="create" class="section level3">
<h3>Create</h3>
<div id="vector" class="section level4">
<h4><code>vector()</code></h4>
<ul>
<li><code>vector(mode = 'double', length = N)</code>，生成长度为 N
的空向量
<ul>
<li>参数 mode 可以为 “integer”/“double”/“numeric”/“logical”/“character”
等，为 “list” 则生成列表</li>
<li>每项的值为
<code>0</code>/<code>FALSE</code>/<code>""</code>/<code>NULL</code>（生成列表时）</li>
</ul></li>
<li>对于特定数据类型的向量，可以简写为：<code>numeric(N)</code>,
<code>logical(N)</code>, <code>character(N)</code></li>
</ul>
<p>全 1
向量的写法为<code>vector('numeric', N) + 1</code>或<code>numeric(N) + 1</code>，比
<code>rep(1, N)</code> 的可读性更好</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">6</span>) <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>#&gt; [1] 1 1 1 1 1 1</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">logical</span>(<span class="dv">7</span>)</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>#&gt; [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb101"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="dv">2</span>)</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>w</span></code></pre></div>
<pre><code>#&gt; [1] &quot;&quot; &quot;&quot;</code></pre>
<div class="sourceCode" id="cb103"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">c</span>(w, <span class="st">&quot;a&quot;</span>)</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>w</span></code></pre></div>
<pre><code>#&gt; [1] &quot;&quot;  &quot;&quot;  &quot;a&quot;</code></pre>
</div>
<div id="c" class="section level4">
<h4><code>c()</code></h4>
<p>组合向量（将多个单元素向量和多元素向量连接起来构成一个向量），其他语言一般用<code>[]</code></p>
<p><code>c()</code> 中即使嵌套，也会被自动展开为 atomic vector</p>
<div class="sourceCode" id="cb105"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>))</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3 4 5 6 7</code></pre>
<p>create 向量时可以命名</p>
<div class="sourceCode" id="cb107"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">c =</span> <span class="dv">3</span>)</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; a b c 
#&gt; 1 2 3</code></pre>
<div class="sourceCode" id="cb109"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x) <span class="co"># 可见属性 names 保存着元素的名称</span></span></code></pre></div>
<pre><code>#&gt;  Named num [1:3] 1 2 3
#&gt;  - attr(*, &quot;names&quot;)= chr [1:3] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
</div>
<div id="mn" class="section level4">
<h4><code>m:n</code></h4>
<p>连续整数向量，类型为 integer vector</p>
<div class="sourceCode" id="cb111"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;integer&quot;</code></pre>
</div>
<div id="seq" class="section level4">
<h4><code>seq*()</code></h4>
<ul>
<li><code>seq(from, to, by=1, length.out)</code>，等差数列，给出三个参数即可</li>
<li><code>seq_len(n)</code>，等价于<code>1:n</code></li>
<li><strong><code>seq_along(x)</code>，一般比 <code>1:length(x)</code>
更安全</strong>
<ul>
<li>若 x
的长度为0，<code>seq_along(x)</code>会返回<code>integer(0)</code>，而非<code>c(1, 0)</code></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb113"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(LETTERS)</span></code></pre></div>
<pre><code>#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
#&gt; [26] 26</code></pre>
</div>
<div id="repx-..." class="section level4">
<h4><code>rep(x, ...)</code></h4>
<p>… 中的参数包括：</p>
<ol style="list-style-type: decimal">
<li>times, 重复对象 x 整体的次数，一般为标量
<ol style="list-style-type: decimal">
<li>该参数也可以是与 x 长度一致的向量，表示对应元素重复对应次数</li>
</ol></li>
<li>each, 对 x 中每个元素重复的次数</li>
<li>length.out, 重复若干次后结果的长度</li>
</ol>
<div class="sourceCode" id="cb115"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">times =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3 1 2 3</code></pre>
<div class="sourceCode" id="cb117"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">times =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>))</span></code></pre></div>
<pre><code>#&gt; [1] 1 1 2 2 2 2 3</code></pre>
<div class="sourceCode" id="cb119"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 1 1 2 2 3 3</code></pre>
<div class="sourceCode" id="cb121"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">length.out =</span> <span class="dv">9</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3 1 2 3 1 2 3</code></pre>
<div class="sourceCode" id="cb123"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">length.out =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>#&gt;  [1] 1 2 3 1 2 3 1 2 3 1</code></pre>
</div>
</div>
<div id="type" class="section level3">
<h3>Type</h3>
<ul>
<li><code>class()</code> 或 <code>typeof()</code> 查看类型</li>
<li><code>is.*()</code> 判断类型</li>
<li>可以使用 <code>is.logical()</code>, <code>is.integer()</code>,
<code>is.double()</code>, <code>is.character()</code></li>
<li>尽量不要使用 <code>is.vector()</code>, <code>is.atomic()</code>,
<code>is.numeric()</code></li>
<li><code>as.*()</code> 转换类型</li>
<li>尽量不要使用<code>as.vector()</code></li>
</ul>
<div class="sourceCode" id="cb125"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb127"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">c</span>(T, F, T))</span></code></pre></div>
<pre><code>#&gt; [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb129"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.character</span>(<span class="fu">c</span>(<span class="st">&quot;h&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;l&quot;</span>, <span class="st">&quot;l&quot;</span>, <span class="st">&quot;o&quot;</span>))</span></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb131"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot;</code></pre>
<div class="sourceCode" id="cb133"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>strings <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>)</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">try</span>(strings <span class="sc">+</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>#&gt; Error in strings + 10 : non-numeric argument to binary operator</code></pre>
<div class="sourceCode" id="cb135"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">try</span>(<span class="fu">as.numeric</span>(strings) <span class="sc">+</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 11 12 13</code></pre>
</div>
<div id="size" class="section level3">
<h3>Size</h3>
<p><code>length()</code></p>
<div class="sourceCode" id="cb137"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(w)</span></code></pre></div>
<pre><code>#&gt; [1] 3</code></pre>
</div>
<div id="label" class="section level3">
<h3>Label</h3>
<p><code>names()[&lt;-]</code> 提取/赋值</p>
<p>赋值为 NULL 时移除 names 属性，或通过
<code>x &lt;- unname(x)</code></p>
</div>
<div id="subset" class="section level3">
<h3>Subset</h3>
<div id="选择器和提取器" class="section level4">
<h4>选择器<code>[]</code>和提取器<code>[[]]</code></h4>
<p><code>[]</code>为子集选择器，返回的是原数据的一个切片，不改变数据结构</p>
<p><code>[[]]</code>为元素提取器，返回的是原数据一个<strong>长度为1的切片</strong>中装载的内容</p>
<p>对向量操作，<code>[]</code>和<code>[[]]</code>的差别很小；但对更复杂的数据类型，二者的差别会很明显：</p>
<div class="sourceCode" id="cb139"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris) <span class="co"># 数据框</span></span></code></pre></div>
<pre><code>#&gt; &#39;data.frame&#39;:    150 obs. of  5 variables:
#&gt;  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
#&gt;  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
#&gt;  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
#&gt;  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
#&gt;  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<div class="sourceCode" id="cb141"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris[<span class="dv">1</span>]) <span class="co"># 只含一个变量的数据框</span></span></code></pre></div>
<pre><code>#&gt; &#39;data.frame&#39;:    150 obs. of  1 variable:
#&gt;  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...</code></pre>
<div class="sourceCode" id="cb143"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris[[<span class="dv">1</span>]]) <span class="co"># 向量</span></span></code></pre></div>
<pre><code>#&gt;  num [1:150] 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...</code></pre>
</div>
<div id="选取的三种方式" class="section level4">
<h4><code>[]</code>选取的三种方式</h4>
<ul>
<li>位置 index，<code>x[4]; x[-2:-4]; x[c(1, 3)]</code>
<ul>
<li>其中正数表示选择，复数表示剔除，<code>[]</code>中不能同时有正数和负数</li>
<li>index 为 0 将返回长度为 0 的向量</li>
<li>index 为空表示保留这一维度的所有元素</li>
</ul></li>
<li>logical vector, 选出相应位置为 TRUE 的元素
<ul>
<li>通过 condition
获得逻辑向量，<code>x[x == 10]; x[x %in% c(1, 2, 5)]</code></li>
</ul></li>
<li>names 属性，<code>x["apple"]</code></li>
</ul>
<div class="sourceCode" id="cb145"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x) <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]</span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a><span class="co"># index</span></span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>] <span class="co"># x向量中的第3-5个元素</span></span></code></pre></div>
<pre><code>#&gt; c d e 
#&gt; 3 4 5</code></pre>
<div class="sourceCode" id="cb147"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">400</span>) <span class="co"># 第1个和第4个元素</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt;   a   b   c   d   e   f   g 
#&gt; 100   2   3 400   5   6   7</code></pre>
<div class="sourceCode" id="cb149"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">6</span><span class="sc">:</span><span class="dv">9</span>] <span class="co"># 超出index时返回 NA</span></span></code></pre></div>
<pre><code>#&gt;    f    g &lt;NA&gt; &lt;NA&gt; 
#&gt;    6    7   NA   NA</code></pre>
<div class="sourceCode" id="cb151"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt;   a   b   c   d   e   f   g 
#&gt; 100   2   3 400   5   6   7</code></pre>
<div class="sourceCode" id="cb153"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">10</span>] <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="co"># 对一个并不存在的元素重新赋值，将自动用 NA 填充未被指定的位置</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt;   a   b   c   d   e   f   g             
#&gt; 100   2   3 400   5   6   7  NA  NA  10</code></pre>
<div class="sourceCode" id="cb155"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="dv">2</span>] <span class="co"># 除了第二个以外的元素</span></span></code></pre></div>
<pre><code>#&gt;   a   c   d   e   f   g             
#&gt; 100   3 400   5   6   7  NA  NA  10</code></pre>
<div class="sourceCode" id="cb157"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="dv">2</span><span class="sc">:-</span><span class="dv">4</span>] <span class="co"># 等价于 x[c(-2, -3, -4)]，即去掉第2、3、4个元素</span></span></code></pre></div>
<pre><code>#&gt;   a   e   f   g             
#&gt; 100   5   6   7  NA  NA  10</code></pre>
<div class="sourceCode" id="cb159"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># condition</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>x[x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)]</span></code></pre></div>
<pre><code>#&gt; b e 
#&gt; 2 5</code></pre>
<div class="sourceCode" id="cb161"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co"># names</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>x[<span class="st">&quot;e&quot;</span>]</span></code></pre></div>
<pre><code>#&gt; e 
#&gt; 5</code></pre>
<div class="sourceCode" id="cb163"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="st">&quot;e&quot;</span>, <span class="st">&quot;j&quot;</span>)] <span class="co"># 访问不存在的name，返回 NA</span></span></code></pre></div>
<pre><code>#&gt;    e &lt;NA&gt; 
#&gt;    5   NA</code></pre>
</div>
<div id="application-lookup-table" class="section level4">
<h4>Application: lookup table</h4>
<div class="sourceCode" id="cb165"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;u&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>)</span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>lookup <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">m =</span> <span class="st">&quot;Male&quot;</span>, <span class="at">f =</span> <span class="st">&quot;Female&quot;</span>, <span class="at">u =</span> <span class="cn">NA</span>) <span class="co"># 键值对</span></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>lookup[x] <span class="sc">%&gt;%</span> <span class="fu">unname</span>()</span></code></pre></div>
<pre><code>#&gt; [1] &quot;Male&quot;   &quot;Female&quot; NA       &quot;Female&quot; &quot;Female&quot; &quot;Male&quot;   &quot;Male&quot;</code></pre>
</div>
<div id="忽略-names" class="section level4">
<h4><code>[[]]</code>忽略 names</h4>
<p><code>[[]]</code>
只能提取一个元素，其中也不能出现负整数或访问不存在的元素（下标越界）</p>
<div class="sourceCode" id="cb167"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">c =</span> <span class="dv">3</span>)</span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>x[<span class="st">&quot;a&quot;</span>]</span></code></pre></div>
<pre><code>#&gt; a 
#&gt; 1</code></pre>
<div class="sourceCode" id="cb169"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>x[[<span class="st">&quot;a&quot;</span>]]</span></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre>
<div class="sourceCode" id="cb171"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">try</span>(x[[<span class="sc">-</span><span class="dv">1</span>]])</span></code></pre></div>
<pre><code>#&gt; Error in x[[-1]] : invalid negative subscript in get1index &lt;real&gt;</code></pre>
<div class="sourceCode" id="cb173"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">try</span>(x[[<span class="dv">4</span>]])</span></code></pre></div>
<pre><code>#&gt; Error in x[[4]] : subscript out of bounds</code></pre>
<div class="sourceCode" id="cb175"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">try</span>(x[[<span class="st">&quot;d&quot;</span>]])</span></code></pre></div>
<pre><code>#&gt; Error in x[[&quot;d&quot;]] : subscript out of bounds</code></pre>
</div>
<div id="下标越界" class="section level4">
<h4>下标越界</h4>
<p>返回 NA</p>
</div>
</div>
<div id="index" class="section level3">
<h3>Index</h3>
<div id="which" class="section level4">
<h4><code>which*</code></h4>
<ul>
<li><code>which(逻辑表达式)</code></li>
<li><code>which.min()</code></li>
<li><code>which.max()</code></li>
</ul>
<div class="sourceCode" id="cb177"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; a b c 
#&gt; 1 2 3</code></pre>
<div class="sourceCode" id="cb179"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which.max</span>(x)</span></code></pre></div>
<pre><code>#&gt; c 
#&gt; 3</code></pre>
<div class="sourceCode" id="cb181"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which.min</span>(x)</span></code></pre></div>
<pre><code>#&gt; a 
#&gt; 1</code></pre>
<div class="sourceCode" id="cb183"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(x <span class="sc">==</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; b 
#&gt; 2</code></pre>
<div class="sourceCode" id="cb185"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(x <span class="sc">&gt;</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>#&gt; named integer(0)</code></pre>
</div>
<div id="match" class="section level4">
<h4><code>*match</code></h4>
<ul>
<li><p><code>match(vector1, vector2)</code>返回第一个向量中各元素在第二个向量中的位置序列，每一个都从头开始匹配，只要匹配到就结束。</p></li>
<li><p><code>pmatch(vector1, vector2)</code>，若第一个向量中某元素在第二个向量中匹配上了，则认为第二个向量中相应元素已被占用，再匹配第一个向量中的下一个元素时，跳过第二个向量中曾被匹配过的元素。</p></li>
</ul>
<div class="sourceCode" id="cb187"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">match</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">5</span>))</span></code></pre></div>
<pre><code>#&gt; [1] 1 1 1</code></pre>
<div class="sourceCode" id="cb189"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pmatch</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">5</span>))</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
</div>
</div>
<div id="operation" class="section level3">
<h3>Operation</h3>
<p>R
对向量的操作都要在原向量的拷贝上进行，不改变原向量（只有直接赋值能改变原向量）。好处是安全，坏处是慢。</p>
<div id="增删改" class="section level4">
<h4>增删改</h4>
<ul>
<li><code>append()</code> 返回插入元素后的拷贝. <span
style="color:red"><strong>注意，R
中一般不直接修改原对象，所以如果要保留这个操作，一定要记得赋值给原变量。</strong></span></li>
<li><code>x &lt;- x[-index]</code> 删除选集</li>
<li><code>replace()</code> 批量替换</li>
</ul>
<div class="sourceCode" id="cb191"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">replace</span>(x, <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>)) <span class="co"># 替换：将x向量中第3个和第4个元素替换为5</span></span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb193"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">append</span>(x, <span class="dv">100</span>, <span class="at">after =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1]   1   2 100   5   5   5   7</code></pre>
<div class="sourceCode" id="cb195"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb197"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">3</span>) <span class="co"># 删除零值项</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">which</span>(a <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5</code></pre>
<div class="sourceCode" id="cb199"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> a[<span class="sc">-</span>b]</span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
</div>
<div id="sort" class="section level4">
<h4>Sort</h4>
<ul>
<li><code>rank(x)</code>返回x中各元素相对大小的排序（默认升序）</li>
<li><code>order(x)</code>返回按照递增/递减的次序重排列x后，新序列各元素在原序列x中的位置</li>
<li><code>sort(x)</code>返回排序后的向量，对于数字默认升序，对于字符串默认字典顺序</li>
<li><code>rev(x)</code>逆序排列</li>
</ul>
<div class="sourceCode" id="cb201"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb203"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rank</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 4 4 4 6</code></pre>
<div class="sourceCode" id="cb205"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(x) <span class="co"># 默认升序排序</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb207"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb209"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rev</span>(x) <span class="co"># 逆序</span></span></code></pre></div>
<pre><code>#&gt; [1] 7 5 5 5 2 1</code></pre>
<div class="sourceCode" id="cb211"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
</div>
<div id="去重偏移差分" class="section level4">
<h4>去重、偏移、差分</h4>
<ul>
<li><code>unique()</code> 去重</li>
<li><code>lead(x, n=1)</code>, <code>lag(x, n=1)</code>
偏移，返回一个序列的领先序列和滞后序列</li>
<li><code>diff(x, lag=1)</code> 差分，lag 用以指定滞后几项。默认的 lag
值为 1</li>
</ul>
<div class="sourceCode" id="cb213"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 7</code></pre>
<div class="sourceCode" id="cb215"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb217"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lead</span>(x, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1]  5  5  5  7 NA NA</code></pre>
<div class="sourceCode" id="cb219"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb221"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diff</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] 1 3 0 0 2</code></pre>
<div class="sourceCode" id="cb223"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
</div>
<div id="统计条件频数" class="section level4">
<h4>统计条件频数</h4>
<p><code>sum(vector中元素要符合的条件)</code></p>
<div class="sourceCode" id="cb225"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 的个数</span></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vector <span class="sc">==</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 3</code></pre>
</div>
<div id="交叉循环遍历" class="section level4">
<h4>交叉循环遍历</h4>
<p><code>expand.grid(..., stringsAsFactors = TRUE)</code>，…参数为若干个向量，比如数值向量
x 和 y，效果为<strong>对二元数值对 (x, y)
所有可能取值的遍历（返回数据框）</strong>。</p>
<p>若 … 为字符串向量，最好将 stringsAsFactors 参数设置为 TRUE</p>
<div class="sourceCode" id="cb227"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a><span class="fu">expand.grid</span>(x, y)</span></code></pre></div>
<pre><code>#&gt;   Var1 Var2
#&gt; 1    1    a
#&gt; 2    2    a
#&gt; 3    3    a
#&gt; 4    1    b
#&gt; 5    2    b
#&gt; 6    3    b
#&gt; 7    1    c
#&gt; 8    2    c
#&gt; 9    3    c</code></pre>
<div class="sourceCode" id="cb229"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">expand.grid</span>(x, z)</span></code></pre></div>
<pre><code>#&gt;   Var1 Var2
#&gt; 1    1    1
#&gt; 2    2    1
#&gt; 3    3    1
#&gt; 4    1    2
#&gt; 5    2    2
#&gt; 6    3    2
#&gt; 7    1    3
#&gt; 8    2    3
#&gt; 9    3    3</code></pre>
</div>
<div id="算数运算" class="section level4">
<h4>算数运算</h4>
<p>向量化运算：对应元素分别运算，较短的向量自动循环直至长度与较长向量匹配</p>
<p>向量元素的 names 不参与运算，但运算符左侧向量的 names
会保留在结果中，右侧向量的 names 被忽略</p>
<div class="sourceCode" id="cb231"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 四则运算(+-*/)、幂(^)、取整(%/%)、取余(%%)</span></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="co"># 自动将标量（长度为 1 的向量）扩展为长度为 6 的向量后再运算</span></span></code></pre></div>
<pre><code>#&gt; [1] 1.0000000 0.5000000 0.3333333 0.2500000 0.2000000 0.1666667</code></pre>
<div class="sourceCode" id="cb233"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">/</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">nrow =</span> <span class="dv">2</span>) <span class="co"># 自动将标量扩展为对应维度的矩阵后再运算</span></span></code></pre></div>
<pre><code>#&gt;      [,1]      [,2]
#&gt; [1,]  1.0 0.3333333
#&gt; [2,]  0.5 0.2500000</code></pre>
<div class="sourceCode" id="cb235"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">*</span> y <span class="co"># 哈达马积</span></span></code></pre></div>
<pre><code>#&gt; [1]  2  6 12 20 30</code></pre>
<div class="sourceCode" id="cb237"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 向量内积（以下写法等价）</span></span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">*</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> <span class="dv">4</span> <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> <span class="dv">5</span> <span class="sc">+</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">6</span></span></code></pre></div>
<pre><code>#&gt; [1] 70</code></pre>
<div class="sourceCode" id="cb239"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x <span class="sc">*</span> y)</span></code></pre></div>
<pre><code>#&gt; [1] 70</code></pre>
<div class="sourceCode" id="cb241"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(x) <span class="sc">%*%</span> y <span class="co"># 利用矩阵乘法，注意 R 中向量默认为列向量</span></span></code></pre></div>
<pre><code>#&gt;      [,1]
#&gt; [1,]   70</code></pre>
<div class="sourceCode" id="cb243"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crossprod</span>(x, y) <span class="co"># 利用矩阵乘法，得到一个 1*1 矩阵</span></span></code></pre></div>
<pre><code>#&gt;      [,1]
#&gt; [1,]   70</code></pre>
<div class="sourceCode" id="cb245"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 向量外积（以下写法等价）</span></span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%*%</span> <span class="fu">t</span>(y)</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    2    3    4    5    6
#&gt; [2,]    4    6    8   10   12
#&gt; [3,]    6    9   12   15   18
#&gt; [4,]    8   12   16   20   24
#&gt; [5,]   10   15   20   25   30</code></pre>
<div class="sourceCode" id="cb247"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%o%</span> y</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    2    3    4    5    6
#&gt; [2,]    4    6    8   10   12
#&gt; [3,]    6    9   12   15   18
#&gt; [4,]    8   12   16   20   24
#&gt; [5,]   10   15   20   25   30</code></pre>
<div class="sourceCode" id="cb249"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kronecker</span>(x, <span class="fu">t</span>(y)) <span class="co"># 克罗内克积</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    2    3    4    5    6
#&gt; [2,]    4    6    8   10   12
#&gt; [3,]    6    9   12   15   18
#&gt; [4,]    8   12   16   20   24
#&gt; [5,]   10   15   20   25   30</code></pre>
<div class="sourceCode" id="cb251"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">outer</span>(x, y)</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    2    3    4    5    6
#&gt; [2,]    4    6    8   10   12
#&gt; [3,]    6    9   12   15   18
#&gt; [4,]    8   12   16   20   24
#&gt; [5,]   10   15   20   25   30</code></pre>
<div class="sourceCode" id="cb253"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tcrossprod</span>(x, y)</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    2    3    4    5    6
#&gt; [2,]    4    6    8   10   12
#&gt; [3,]    6    9   12   15   18
#&gt; [4,]    8   12   16   20   24
#&gt; [5,]   10   15   20   25   30</code></pre>
</div>
<div id="逻辑运算" class="section level4">
<h4>逻辑运算</h4>
<div class="sourceCode" id="cb255"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb255-2"><a href="#cb255-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&lt;</span> <span class="dv">4</span></span></code></pre></div>
<pre><code>#&gt; [1]  TRUE  TRUE  TRUE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb257"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(x <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="co"># 一个向量的所有元素是否满足某条件</span></span></code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<div class="sourceCode" id="cb259"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(x <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="co"># 一个向量的部分元素是否满足某条件</span></span></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb261"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(x, <span class="dv">2</span>, <span class="at">byrow =</span> T) <span class="sc">&lt;</span> <span class="dv">4</span></span></code></pre></div>
<pre><code>#&gt;       [,1]  [,2]  [,3]
#&gt; [1,]  TRUE  TRUE  TRUE
#&gt; [2,] FALSE FALSE FALSE</code></pre>
</div>
<div id="集合运算" class="section level4">
<h4>集合运算</h4>
<div class="sourceCode" id="cb263"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="fu">intersect</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">12</span>, <span class="dv">4</span>, <span class="dv">123</span>, <span class="dv">12</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)) <span class="co"># 交</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb265"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="fu">union</span>(<span class="fu">c</span>(<span class="st">&quot;狗熊会&quot;</span>, <span class="st">&quot;聚数据英才&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;狗熊会&quot;</span>, <span class="st">&quot;助产业振兴&quot;</span>)) <span class="co"># 并</span></span></code></pre></div>
<pre><code>#&gt; [1] &quot;狗熊会&quot;     &quot;聚数据英才&quot; &quot;助产业振兴&quot;</code></pre>
<div class="sourceCode" id="cb267"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="dv">10</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">3</span>) <span class="co"># 差</span></span></code></pre></div>
<pre><code>#&gt; [1] 10  9  8  7  6  2</code></pre>
</div>
</div>
</div>
<div id="matrix" class="section level2">
<h2>Matrix</h2>
<div id="create-1" class="section level3">
<h3>Create</h3>
<div id="向量转化为矩阵" class="section level4">
<h4>向量转化为矩阵</h4>
<ol style="list-style-type: decimal">
<li><p><code>matrix(vector, nrow, ncol, byrow = FALSE, dimnames = NULL)</code>，默认按列填充矩阵，byrow
设为 TRUE 可按行</p></li>
<li><p>为向量添加维度属性
<code>dim(vector) &lt;- c(nrow,ncol)</code></p></li>
</ol>
<div class="sourceCode" id="cb269"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 生成 3*3 的全 1 矩阵</span></span>
<span id="cb269-2"><a href="#cb269-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-3"><a href="#cb269-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 第一种</span></span>
<span id="cb269-4"><a href="#cb269-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">9</span>) <span class="sc">%&gt;%</span> <span class="fu">matrix</span>(<span class="at">nrow =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    1    1
#&gt; [2,]    1    1    1
#&gt; [3,]    1    1    1</code></pre>
<div class="sourceCode" id="cb271"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 第二种</span></span>
<span id="cb271-2"><a href="#cb271-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">9</span>)</span>
<span id="cb271-3"><a href="#cb271-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb271-4"><a href="#cb271-4" aria-hidden="true" tabindex="-1"></a>x <span class="co"># 这种方式改变了变量 x 的值，不是很推荐，还是第一种更好</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    1    1
#&gt; [2,]    1    1    1
#&gt; [3,]    1    1    1</code></pre>
</div>
<div id="diag" class="section level4">
<h4><code>diag()</code></h4>
<ol style="list-style-type: decimal">
<li><code>diag(x = 1, nrow, ncol, names = TRUE)</code>
<ol style="list-style-type: decimal">
<li>x 为标量或向量时，<code>diag()</code>表示根据对角元 create 矩阵</li>
<li>x 为矩阵时，<code>diag()</code>为提取对角元，返回向量</li>
<li>x 为标量且只有这一个参数时，返回 <span
class="math inline">\(n\)</span> 阶单位阵 <span
class="math inline">\(I_n\)</span></li>
</ol></li>
<li><code>diag(x) &lt;- value</code>, value 可以是标量或向量</li>
</ol>
<div class="sourceCode" id="cb273"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(<span class="dv">4</span>) <span class="co"># n 阶单位阵</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    0    0    0
#&gt; [2,]    0    1    0    0
#&gt; [3,]    0    0    1    0
#&gt; [4,]    0    0    0    1</code></pre>
<div class="sourceCode" id="cb275"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(<span class="dv">0</span>, <span class="dv">4</span>) <span class="co"># 全 0 四阶方阵</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    0    0    0    0
#&gt; [2,]    0    0    0    0
#&gt; [3,]    0    0    0    0
#&gt; [4,]    0    0    0    0</code></pre>
<div class="sourceCode" id="cb277"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(<span class="dv">10</span>, <span class="dv">3</span>, <span class="dv">4</span>) <span class="co"># nrow 和 ncol 可以不相等</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]   10    0    0    0
#&gt; [2,]    0   10    0    0
#&gt; [3,]    0    0   10    0</code></pre>
<div class="sourceCode" id="cb279"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">4</span>) <span class="co"># 任意 size 的全 0 矩阵</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    0    0    0    0
#&gt; [2,]    0    0    0    0
#&gt; [3,]    0    0    0    0</code></pre>
<div class="sourceCode" id="cb281"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">4</span>) <span class="sc">+</span> <span class="dv">1</span> <span class="co"># 任意 size 的全 1 矩阵</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    1    1    1
#&gt; [2,]    1    1    1    1
#&gt; [3,]    1    1    1    1</code></pre>
<div class="sourceCode" id="cb283"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="fu">numeric</span>(<span class="dv">12</span>), <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span> <span class="dv">1</span> <span class="co"># 任意 size 全 1 矩阵的另一种写法</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    1    1    1
#&gt; [2,]    1    1    1    1
#&gt; [3,]    1    1    1    1</code></pre>
<div class="sourceCode" id="cb285"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">diag</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="co"># create 对角矩阵</span></span>
<span id="cb285-2"><a href="#cb285-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    1    0    0    0    0
#&gt; [2,]    0    2    0    0    0
#&gt; [3,]    0    0    3    0    0
#&gt; [4,]    0    0    0    4    0
#&gt; [5,]    0    0    0    0    5</code></pre>
<div class="sourceCode" id="cb287"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(x) <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb287-2"><a href="#cb287-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    2    0    0    0    0
#&gt; [2,]    0    2    0    0    0
#&gt; [3,]    0    0    2    0    0
#&gt; [4,]    0    0    0    2    0
#&gt; [5,]    0    0    0    0    2</code></pre>
<div class="sourceCode" id="cb289"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(x) <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb289-2"><a href="#cb289-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,] &quot;a&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot; 
#&gt; [2,] &quot;0&quot;  &quot;b&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot; 
#&gt; [3,] &quot;0&quot;  &quot;0&quot;  &quot;c&quot;  &quot;0&quot;  &quot;0&quot; 
#&gt; [4,] &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;d&quot;  &quot;0&quot; 
#&gt; [5,] &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;e&quot;</code></pre>
</div>
<div id="矩阵转化为向量" class="section level4">
<h4>矩阵转化为向量</h4>
<p><code>as.vector()</code> 按照一列一列地顺序将矩阵展开为向量</p>
</div>
</div>
<div id="type-1" class="section level3">
<h3>Type</h3>
<ul>
<li><code>is.matrix()</code> 判断</li>
<li><code>as.matrix(x)</code>
转换，x为数据框时，自动转换为兼容所有元素的、更灵活的数据类型</li>
<li><code>data.matrix(x)</code>
转换数据框，自动将所有元素转换为数字</li>
</ul>
</div>
<div id="size-1" class="section level3">
<h3>Size</h3>
<p><code>nrow(A)</code>, <code>ncol(A)</code> 作用于向量时返回
NULL，其变体 <code>NROW()</code>, <code>NCOL()</code>
可作用于向量（将其视为 <span class="math inline">\(n\times1\)</span>
矩阵） <code>dim(A)</code>，返回长度为 2 的向量 <code>length(A)</code>
返回矩阵元素的个数（矩阵展开为向量的 size）</p>
</div>
<div id="label-1" class="section level3">
<h3>Label</h3>
<p>在默认情况下，创建矩阵时不会自动分配行名和列名。当不同的行列有不同的含义时，
为其命名就显得必要且直观。</p>
<div id="创建矩阵时为行列命名" class="section level4">
<h4>创建矩阵时为行列命名</h4>
<p><code>matrix()</code> 的 dimnames 参数，取值为 list(row_name_vector,
col_name_vector)</p>
</div>
<div id="创建矩阵后为行列命名" class="section level4">
<h4>创建矩阵后为行列命名</h4>
<p><code>rownames(A) [&lt;-]</code> 提取/赋值</p>
<p><code>colnames(A) [&lt;-]</code> 提取/赋值</p>
</div>
</div>
<div id="subset-1" class="section level3">
<h3>Subset</h3>
<div id="二维选择器" class="section level4">
<h4>二维选择器</h4>
<p><code>[行选择器, 列选择器]</code> 每个选择器都可以是index、condition
和 name；若一个维度的参数空缺，则该维度的所有值都会被选出来</p>
<p><strong>矩阵的<code>[]</code>选择器会返回维度尽可能低的结果</strong>，因此<code>A[2, ]</code>返回的是向量而非<span
class="math inline">\(1\times
n\)</span>的矩阵。如果不想降维（即使选择一列也要保持 class
属性为矩阵），需要设置 drop 参数
<code>[行选择器, 列选择器, drop = FALSE]</code></p>
<div class="sourceCode" id="cb291"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>, <span class="dv">4</span>)</span>
<span id="cb291-2"><a href="#cb291-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-3"><a href="#cb291-3" aria-hidden="true" tabindex="-1"></a>A[<span class="dv">2</span>, ] <span class="co"># A的第2行</span></span></code></pre></div>
<pre><code>#&gt; [1]  2  6 10 14</code></pre>
<div class="sourceCode" id="cb293"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a>A[, <span class="sc">-</span><span class="dv">2</span>] <span class="co"># A排除第2列</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    9   13
#&gt; [2,]    2   10   14
#&gt; [3,]    3   11   15
#&gt; [4,]    4   12   16</code></pre>
<div class="sourceCode" id="cb295"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a>A[<span class="dv">3</span>, <span class="dv">2</span>] <span class="co"># A的第3行第2列</span></span></code></pre></div>
<pre><code>#&gt; [1] 7</code></pre>
<div class="sourceCode" id="cb297"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a>A[<span class="dv">3</span>, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)] <span class="co"># A的第3行第2列和第4列</span></span></code></pre></div>
<pre><code>#&gt; [1]  7 15</code></pre>
</div>
<div id="一维选择器" class="section level4">
<h4>一维选择器</h4>
<p>矩阵本质上是一个向量，所以适用向量的一维选择器</p>
<div class="sourceCode" id="cb299"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">3</span>)</span>
<span id="cb299-2"><a href="#cb299-2" aria-hidden="true" tabindex="-1"></a>A[A <span class="sc">&gt;</span> <span class="dv">3</span>]</span></code></pre></div>
<pre><code>#&gt; [1] 4 5 6 7 8 9</code></pre>
</div>
<div id="矩阵选择器" class="section level4">
<h4>矩阵选择器</h4>
<p>使用矩阵作为选择器，矩阵的每一行提供多维
index，选择一个元素；列数决定选择元素的个数</p>
<div class="sourceCode" id="cb301"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true" tabindex="-1"></a>vals <span class="ot">&lt;-</span> <span class="fu">outer</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">FUN =</span> <span class="st">&quot;paste&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb301-2"><a href="#cb301-2" aria-hidden="true" tabindex="-1"></a>vals</span></code></pre></div>
<pre><code>#&gt;      [,1]  [,2]  [,3]  [,4]  [,5] 
#&gt; [1,] &quot;1,1&quot; &quot;1,2&quot; &quot;1,3&quot; &quot;1,4&quot; &quot;1,5&quot;
#&gt; [2,] &quot;2,1&quot; &quot;2,2&quot; &quot;2,3&quot; &quot;2,4&quot; &quot;2,5&quot;
#&gt; [3,] &quot;3,1&quot; &quot;3,2&quot; &quot;3,3&quot; &quot;3,4&quot; &quot;3,5&quot;
#&gt; [4,] &quot;4,1&quot; &quot;4,2&quot; &quot;4,3&quot; &quot;4,4&quot; &quot;4,5&quot;
#&gt; [5,] &quot;5,1&quot; &quot;5,2&quot; &quot;5,3&quot; &quot;5,4&quot; &quot;5,5&quot;</code></pre>
<div class="sourceCode" id="cb303"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a>select <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, <span class="fu">c</span>(</span>
<span id="cb303-2"><a href="#cb303-2" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="dv">1</span>,</span>
<span id="cb303-3"><a href="#cb303-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="dv">1</span>,</span>
<span id="cb303-4"><a href="#cb303-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="dv">4</span></span>
<span id="cb303-5"><a href="#cb303-5" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb303-6"><a href="#cb303-6" aria-hidden="true" tabindex="-1"></a>select</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]    1    1
#&gt; [2,]    3    1
#&gt; [3,]    2    4</code></pre>
<div class="sourceCode" id="cb305"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a>vals[select]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;1,1&quot; &quot;3,1&quot; &quot;2,4&quot;</code></pre>
</div>
</div>
<div id="index-1" class="section level3">
<h3>Index</h3>
<p><code>row(A)</code>, <code>col(A)</code>
返回两个矩阵，元素分别为行列下标。</p>
<div class="sourceCode" id="cb307"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>, <span class="dv">4</span>)</span>
<span id="cb307-2"><a href="#cb307-2" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    5    9   13
#&gt; [2,]    2    6   10   14
#&gt; [3,]    3    7   11   15
#&gt; [4,]    4    8   12   16</code></pre>
<div class="sourceCode" id="cb309"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="fu">row</span>(A)</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    1    1    1
#&gt; [2,]    2    2    2    2
#&gt; [3,]    3    3    3    3
#&gt; [4,]    4    4    4    4</code></pre>
<div class="sourceCode" id="cb311"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">col</span>(A)</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    2    3    4
#&gt; [2,]    1    2    3    4
#&gt; [3,]    1    2    3    4
#&gt; [4,]    1    2    3    4</code></pre>
<div class="sourceCode" id="cb313"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取下三角矩阵算法</span></span>
<span id="cb313-2"><a href="#cb313-2" aria-hidden="true" tabindex="-1"></a>A[<span class="fu">row</span>(A) <span class="sc">&lt;</span> <span class="fu">col</span>(A)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb313-3"><a href="#cb313-3" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    0    0    0
#&gt; [2,]    2    6    0    0
#&gt; [3,]    3    7   11    0
#&gt; [4,]    4    8   12   16</code></pre>
</div>
<div id="operation-1" class="section level3">
<h3>Operation</h3>
<div id="转置-ta" class="section level4">
<h4>转置 <code>t(A)</code></h4>
<p>向量没有维度属性，不是矩阵。要把向量转化为 <span
class="math inline">\(1 \times n\)</span> 和 <span
class="math inline">\(n \times 1\)</span> 的矩阵，可以用
<code>dim()</code>，也可以用 <code>t()</code>,
<code>as.matrix()</code></p>
<div class="sourceCode" id="cb315"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb315-2"><a href="#cb315-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-3"><a href="#cb315-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.matrix</span>(x) <span class="co"># 最直观</span></span></code></pre></div>
<pre><code>#&gt;      [,1]
#&gt; [1,]    1
#&gt; [2,]    2
#&gt; [3,]    3
#&gt; [4,]    4
#&gt; [5,]    5
#&gt; [6,]    6</code></pre>
<div class="sourceCode" id="cb317"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="st">`</span><span class="at">dim&lt;-</span><span class="st">`</span>(<span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">1</span>))</span></code></pre></div>
<pre><code>#&gt;      [,1]
#&gt; [1,]    1
#&gt; [2,]    2
#&gt; [3,]    3
#&gt; [4,]    4
#&gt; [5,]    5
#&gt; [6,]    6</code></pre>
<div class="sourceCode" id="cb319"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(<span class="fu">t</span>(x))</span></code></pre></div>
<pre><code>#&gt;      [,1]
#&gt; [1,]    1
#&gt; [2,]    2
#&gt; [3,]    3
#&gt; [4,]    4
#&gt; [5,]    5
#&gt; [6,]    6</code></pre>
<div class="sourceCode" id="cb321"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="st">`</span><span class="at">dim&lt;-</span><span class="st">`</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">6</span>))</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5] [,6]
#&gt; [1,]    1    2    3    4    5    6</code></pre>
<div class="sourceCode" id="cb323"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(x)</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5] [,6]
#&gt; [1,]    1    2    3    4    5    6</code></pre>
<p>对数据框使用 <code>t()</code>，会自动将其转换为矩阵</p>
</div>
<div id="矩阵乘法" class="section level4">
<h4>矩阵乘法</h4>
<ul>
<li><code>A%*%B</code>
<ul>
<li>一个例外：若 A 和 B 均为列向量，则运算时自动对 A 转置<a href="#fn1"
class="footnote-ref" id="fnref1"><sup>1</sup></a>，执行
<code>t(A)%*%B</code>，返回 A 与 B 的内积</li>
<li><code>crossprod(A, B)</code> 是 <code>t(A) %*% B</code> 的简写</li>
<li><code>tcrossprod(A, B)</code> 是 <code>A %*% t(B)</code> 的简写</li>
</ul></li>
<li><code>*</code>, 哈达马积</li>
<li><code>kronecker()</code>, 克罗内克积</li>
</ul>
<div class="sourceCode" id="cb325"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 矩阵乘法</span></span>
<span id="cb325-2"><a href="#cb325-2" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">3</span>)</span>
<span id="cb325-3"><a href="#cb325-3" aria-hidden="true" tabindex="-1"></a>m1 <span class="sc">%*%</span> m1</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]   30   66  102
#&gt; [2,]   36   81  126
#&gt; [3,]   42   96  150</code></pre>
</div>
<div id="对角元素" class="section level4">
<h4>对角元素</h4>
<p><code>diag(A)</code> 返回对角元素组成的向量</p>
</div>
<div id="矩阵的逆线性方程组的解" class="section level4">
<h4>矩阵的逆；线性方程组的解</h4>
<ul>
<li><code>solve(A, B)</code>, 返回<code>A %*% X = B</code>的解。</li>
<li><code>solve(A)</code>,
返回矩阵A的逆，即<code>Solve(A, I)</code></li>
</ul>
</div>
<div id="特征值和特征向量" class="section level4">
<h4>特征值和特征向量</h4>
<p><code>A.eigen &lt;- eigen(A, symmetric=T)</code></p>
</div>
<div id="行列式" class="section level4">
<h4>行列式</h4>
<p><code>det(A)</code></p>
</div>
<div id="提取上下三角矩阵" class="section level4">
<h4>提取上、下三角矩阵</h4>
<p><code>lower.tri(A,diag=T/F)</code>和<code>upper.tri(A,diag=T/F)</code>，这两个函数返回逻辑矩阵</p>
<div class="sourceCode" id="cb327"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>, <span class="dv">4</span>)</span>
<span id="cb327-2"><a href="#cb327-2" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    5    9   13
#&gt; [2,]    2    6   10   14
#&gt; [3,]    3    7   11   15
#&gt; [4,]    4    8   12   16</code></pre>
<div class="sourceCode" id="cb329"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a>A[<span class="fu">lower.tri</span>(A)] <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co"># A[lower.tri(A)] 为一维选择器，返回向量而非矩阵</span></span>
<span id="cb329-2"><a href="#cb329-2" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    5    9   13
#&gt; [2,]    0    6   10   14
#&gt; [3,]    0    0   11   15
#&gt; [4,]    0    0    0   16</code></pre>
</div>
<div id="正定矩阵的choleskey分解" class="section level4">
<h4>正定矩阵的Choleskey分解</h4>
<p><code>chol(A)</code></p>
<p>即返回满足 <span class="math inline">\(A=P{^T}P\)</span>
的P，其中P为上三角矩阵</p>
</div>
<div id="矩阵合并" class="section level4">
<h4>矩阵合并</h4>
<p><code>rbind()</code>, <code>cbind()</code></p>
<div class="sourceCode" id="cb331"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(A, B)</span>
<span id="cb331-2"><a href="#cb331-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(A, B)</span>
<span id="cb331-3"><a href="#cb331-3" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(A, B)</span>
<span id="cb331-4"><a href="#cb331-4" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(A, B)</span></code></pre></div>
</div>
<div id="对行列分别操作" class="section level4">
<h4>对行、列分别操作</h4>
<ul>
<li><code>apply(matrix, 1, f)</code> 将行依次传递给 f</li>
<li><code>apply(matrix, 2, f)</code> 将列依次传递给 f</li>
<li><code>rowSums()</code></li>
<li><code>rowMeans()</code></li>
<li><code>colSums()</code></li>
<li><code>colMeans()</code></li>
</ul>
<div class="sourceCode" id="cb332"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>, <span class="dv">4</span>)</span>
<span id="cb332-2"><a href="#cb332-2" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    5    9   13
#&gt; [2,]    2    6   10   14
#&gt; [3,]    3    7   11   15
#&gt; [4,]    4    8   12   16</code></pre>
<div class="sourceCode" id="cb334"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rowSums</span>(A)</span></code></pre></div>
<pre><code>#&gt; [1] 28 32 36 40</code></pre>
<div class="sourceCode" id="cb336"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">1</span>, sum)</span></code></pre></div>
<pre><code>#&gt; [1] 28 32 36 40</code></pre>
<div class="sourceCode" id="cb338"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colMeans</span>(A)</span></code></pre></div>
<pre><code>#&gt; [1]  2.5  6.5 10.5 14.5</code></pre>
<div class="sourceCode" id="cb340"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">2</span>, mean)</span></code></pre></div>
<pre><code>#&gt; [1]  2.5  6.5 10.5 14.5</code></pre>
</div>
</div>
</div>
<div id="array" class="section level2">
<h2>Array</h2>
<p>张量，或更高维度的向量</p>
<div id="create-2" class="section level3">
<h3>Create</h3>
<p><code>z&lt;-array(vector, dimensions, dimnames = list(v1, v2, v3, ...))</code></p>
</div>
<div id="label-2" class="section level3">
<h3>Label</h3>
<p><code>dimnames() [&lt;-]</code> 提取/赋值</p>
<div class="sourceCode" id="cb342"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>, <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>), <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;r1&quot;</span>, <span class="st">&quot;r2&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;c1&quot;</span>, <span class="st">&quot;c2&quot;</span>, <span class="st">&quot;c3&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;p1&quot;</span>, <span class="st">&quot;p2&quot;</span>, <span class="st">&quot;p3&quot;</span>, <span class="st">&quot;p4&quot;</span>)))</span>
<span id="cb342-2"><a href="#cb342-2" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>#&gt; , , p1
#&gt; 
#&gt;    c1 c2 c3
#&gt; r1  1  3  5
#&gt; r2  2  4  6
#&gt; 
#&gt; , , p2
#&gt; 
#&gt;    c1 c2 c3
#&gt; r1  7  9 11
#&gt; r2  8 10 12
#&gt; 
#&gt; , , p3
#&gt; 
#&gt;    c1 c2 c3
#&gt; r1 13 15 17
#&gt; r2 14 16 18
#&gt; 
#&gt; , , p4
#&gt; 
#&gt;    c1 c2 c3
#&gt; r1 19 21 23
#&gt; r2 20 22 24</code></pre>
<div class="sourceCode" id="cb344"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(z)</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;r1&quot; &quot;r2&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] &quot;c1&quot; &quot;c2&quot; &quot;c3&quot;
#&gt; 
#&gt; [[3]]
#&gt; [1] &quot;p1&quot; &quot;p2&quot; &quot;p3&quot; &quot;p4&quot;</code></pre>
</div>
<div id="subset-2" class="section level3">
<h3>Subset</h3>
<p><code>[第1维选择器, 第2维选择器, 第3维选择器, ...]</code></p>
</div>
</div>
<div id="list" class="section level2">
<h2>List</h2>
<p>list
逻辑上是一组<span style = 'color: orangered'><strong>有序</span>键值对</strong>的集合（就像
JS 中的对象）</p>
<p>但实现上是广义向量（作为 values）附加了 index 或 names 属性（作为
keys）</p>
<div id="create-3" class="section level3">
<h3>Create</h3>
<div id="直接定义列表内容" class="section level4">
<h4>直接定义列表内容</h4>
<p><code>list(name1 = value1, name2 = value2, ...)</code>，可以省略
names</p>
</div>
<div id="长度为-n-的空列表" class="section level4">
<h4>长度为 N 的空列表</h4>
<p><code>vector(mode = 'list', length = N)</code></p>
<p>R 中的 vector 天然体现着向量的“广义”</p>
</div>
</div>
<div id="type-2" class="section level3">
<h3>Type</h3>
<ul>
<li><code>is.list()</code> 判断</li>
<li><code>as.list()</code> 转换
<ul>
<li><code>as.vector()</code>对list无效，因为 list
是广义向量，“vector”包含了”list”</li>
</ul></li>
<li><code>unlist()</code>
将列表强制转换为向量。<strong>由于规则过于复杂，最好不要使用该函数</strong>
<ul>
<li>按分量顺序依次排列，<strong>强制不再嵌套</strong>！</li>
<li>自动保证同样的数据类型。比如，强制转换混合了数值和文本的列表，会得到字符串向量</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb346"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb346-2"><a href="#cb346-2" aria-hidden="true" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] 1
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] 3</code></pre>
<div class="sourceCode" id="cb348"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.vector</span>(l)</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] 1
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] 3</code></pre>
<div class="sourceCode" id="cb350"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.integer</span>(l)</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb352"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unlist</span>(l)</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
</div>
<div id="size-2" class="section level3">
<h3>Size</h3>
<p><code>dim(list)&lt;-</code>可以创建列表矩阵</p>
<div class="sourceCode" id="cb354"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">&quot;a&quot;</span>, <span class="cn">TRUE</span>, <span class="fl">1.0</span>)</span>
<span id="cb354-2"><a href="#cb354-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(l) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb354-3"><a href="#cb354-3" aria-hidden="true" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>#&gt;      [,1]      [,2]
#&gt; [1,] integer,3 TRUE
#&gt; [2,] &quot;a&quot;       1</code></pre>
<div class="sourceCode" id="cb356"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">1</span>, <span class="dv">1</span>]]</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
</div>
<div id="label-3" class="section level3">
<h3>Label</h3>
<p><code>names(list) [&lt;-]</code> 提取/赋值</p>
<p>赋值为 NULL 时移除 names 属性，或通过
<code>x &lt;- unname(x)</code></p>
</div>
<div id="subset-3" class="section level3">
<h3>Subset</h3>
<p>第一种语法，用<code>[]</code>符号，里面可以是 index/condition/key</p>
<p>第二种语法，用 `[`() 或 <code>magrittr::extract()</code>函数</p>
<div class="sourceCode" id="cb358"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="#cb358-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">2</span>, <span class="cn">TRUE</span>)</span>
<span id="cb358-2"><a href="#cb358-2" aria-hidden="true" tabindex="-1"></a>l[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb360"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">[</span><span class="st">`</span>(l, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb362"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="#cb362-1" aria-hidden="true" tabindex="-1"></a>magrittr<span class="sc">::</span><span class="fu">extract</span>(l, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;</code></pre>
<p>下标越界时，返回 NULL</p>
</div>
<div id="extract" class="section level3">
<h3>Extract</h3>
<ul>
<li>第一种语法，用<code>[[]]</code>符号，里面可以是
index/condition(logical vector)/key</li>
<li>第二种语法，用<code>list$key</code>，是<code>list[['key']]</code>的语法糖
<ul>
<li>若 “key” 储存在一个变量 var
中，<code>df$var</code>等价于<code>df[["var"]]</code>，是无效的，此时只有<code>df[[var]]</code>才能生效。所以，<code>df[["key"]]</code>总是比<code>df$key</code>更保险一些</li>
<li><code>$</code>能部分匹配变量名，而<code>[[]]</code>总是完全精准地匹配</li>
</ul></li>
<li>第三种语法，用 `[[`() 或 <code>magrittr::extract2()</code>函数</li>
<li>第四种语法，用<code>purrr::pluck(.x, ..., .default = NULL)</code>或<code>purrr::chuck(.x, ...)</code>
<ul>
<li>…可以是用逗号间隔的多个name/index，适用于对深度嵌套列表（<strong>读取
JSON 文件时很常见</strong>）的提取</li>
<li>要搜索的元素不存在时，pluck() 默认返回 NULL，而 chuck()
会抛出错误</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb364"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb366"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">[[</span><span class="st">`</span>(l, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb368"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a>magrittr<span class="sc">::</span><span class="fu">extract2</span>(l, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb370"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb370-2"><a href="#cb370-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb370-3"><a href="#cb370-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb370-4"><a href="#cb370-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb370-5"><a href="#cb370-5" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">pluck</span>(x, <span class="st">&quot;a&quot;</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre>
<div class="sourceCode" id="cb372"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">pluck</span>(x, <span class="st">&quot;c&quot;</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; NULL</code></pre>
<div class="sourceCode" id="cb374"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">pluck</span>(x, <span class="st">&quot;c&quot;</span>, <span class="dv">1</span>, <span class="at">.default =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>#&gt; [1] NA</code></pre>
</div>
<div id="operation-2" class="section level3">
<h3>Operation</h3>
<div id="改变元素" class="section level4">
<h4>改变元素</h4>
<p>对相应元素直接赋值</p>
</div>
<div id="删除元素" class="section level4">
<h4>删除元素</h4>
<p>赋值为 <code>NULL</code> 即为删除</p>
</div>
<div id="添加元素" class="section level4">
<h4>添加元素</h4>
<p>第一种语法，对新元素赋值。</p>
<div class="sourceCode" id="cb376"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 添加元素的最佳写法，无需知道 index</span></span>
<span id="cb376-2"><a href="#cb376-2" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">list</span>(...)</span>
<span id="cb376-3"><a href="#cb376-3" aria-hidden="true" tabindex="-1"></a>l[[<span class="fu">length</span>(l) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> new_element</span></code></pre></div>
<p>第二种语法，<code>append(list, value, after = length(list))</code>，默认加到列表的末尾。但若插入的元素本身是一个列表（很多对象本质上都是一个列表），则会<strong>破坏层级结构，将所有的元素依次插入到前一个列表</strong>。所以若要保存列表的层级结构，还是第一种语法更保险。</p>
<div class="sourceCode" id="cb377"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="#cb377-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">4</span>]] <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">2</span>)</span>
<span id="cb377-2"><a href="#cb377-2" aria-hidden="true" tabindex="-1"></a>l<span class="sc">$</span>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>)</span>
<span id="cb377-3"><a href="#cb377-3" aria-hidden="true" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] TRUE
#&gt; 
#&gt; [[4]]
#&gt;    x y
#&gt; 1: 1 2
#&gt; 
#&gt; $z
#&gt; [1] &quot;one&quot;   &quot;two&quot;   &quot;three&quot;</code></pre>
<div class="sourceCode" id="cb379"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="#cb379-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">append</span>(l, <span class="dv">6</span>)</span>
<span id="cb379-2"><a href="#cb379-2" aria-hidden="true" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] TRUE
#&gt; 
#&gt; [[4]]
#&gt;    x y
#&gt; 1: 1 2
#&gt; 
#&gt; $z
#&gt; [1] &quot;one&quot;   &quot;two&quot;   &quot;three&quot;
#&gt; 
#&gt; [[6]]
#&gt; [1] 6</code></pre>
<div class="sourceCode" id="cb381"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="#cb381-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">append</span>(l, <span class="fu">list</span>(<span class="dv">7</span>, <span class="dv">8</span>))</span>
<span id="cb381-2"><a href="#cb381-2" aria-hidden="true" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] TRUE
#&gt; 
#&gt; [[4]]
#&gt;    x y
#&gt; 1: 1 2
#&gt; 
#&gt; $z
#&gt; [1] &quot;one&quot;   &quot;two&quot;   &quot;three&quot;
#&gt; 
#&gt; [[6]]
#&gt; [1] 6
#&gt; 
#&gt; [[7]]
#&gt; [1] 7
#&gt; 
#&gt; [[8]]
#&gt; [1] 8</code></pre>
<div class="sourceCode" id="cb383"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="#cb383-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">9</span>]] <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb383-2"><a href="#cb383-2" aria-hidden="true" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] TRUE
#&gt; 
#&gt; [[4]]
#&gt;    x y
#&gt; 1: 1 2
#&gt; 
#&gt; $z
#&gt; [1] &quot;one&quot;   &quot;two&quot;   &quot;three&quot;
#&gt; 
#&gt; [[6]]
#&gt; [1] 6
#&gt; 
#&gt; [[7]]
#&gt; [1] 7
#&gt; 
#&gt; [[8]]
#&gt; [1] 8
#&gt; 
#&gt; [[9]]
#&gt; [[9]][[1]]
#&gt; [1] 9
#&gt; 
#&gt; [[9]][[2]]
#&gt; [1] 10</code></pre>
</div>
</div>
</div>
<div id="data.frame" class="section level2">
<h2>Data.Frame</h2>
<p><img
src="https://d33wubrfki0l68.cloudfront.net/c5fd25550aa2a82d2483069c1eb4de6a3a1f763f/c821f/diagrams/vectors/data-frame-1.png" /></p>
<p>data.frame
是长度相同的列<strong>向量</strong>（此处向量是广义的，即可以是 atomic
vector 或 list）组成的 List.</p>
<p>R 原生支持向量化操作，因此 R
操作数据框中的向量有先天优势，语法简洁。</p>
<p>同时，data.frame 可以像矩阵一样，以二维表方式呈现。因此，<strong>R
中操作矩阵的一些（泛型）函数兼容了 data.frame
对象</strong>，即可以像操作矩阵一样操作 data.frame</p>
<div id="create-4" class="section level3">
<h3>Create</h3>
<p><code>data.frame(var1 = col1, var2 = col2, …, row.names = NULL, check.names = TRUE, stringsAsFactors = FALSE)</code></p>
<ol style="list-style-type: decimal">
<li><p>R 4.0 之前，构建R的原生数据框时，参数 stringsAsFactors 的默认值为
TRUE，字符向量默认被转换成因子（因子的 level
相比字符串节省储存空间），数据类型变为
numeric，无法再用字符串函数处理。4.0 后更改了这一默认值。</p></li>
<li><p>check.names 默认为 TRUE，建立数据框时会使用函数
<code>make.names()</code> 检查变量名，将 R
不允许出现在变量名中的特殊字符转换为<code>.</code>，如将列名
<code>Population(before)</code> 自动转换为
<code>Population.before.</code></p>
<ol style="list-style-type: decimal">
<li>若选 FALSE，会最大限度地保留原本的列名。但访问这些在 R
中本为非法的列时，必须用反引号将列名括起来，形如
results$`Population(before)`</li>
</ol></li>
</ol>
<div id="list-columns" class="section level4">
<h4>list columns</h4>
<div class="sourceCode" id="cb385"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框后添加</span></span>
<span id="cb385-2"><a href="#cb385-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb385-3"><a href="#cb385-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb385-4"><a href="#cb385-4" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>#&gt;   x          y
#&gt; 1 1       1, 2
#&gt; 2 2    1, 2, 3
#&gt; 3 3 1, 2, 3, 4</code></pre>
<div class="sourceCode" id="cb387"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 或用 I() 包裹，表示不会自动转换</span></span>
<span id="cb387-2"><a href="#cb387-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb387-3"><a href="#cb387-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, </span>
<span id="cb387-4"><a href="#cb387-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">I</span>(<span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span>
<span id="cb387-5"><a href="#cb387-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>#&gt;   x          y
#&gt; 1 1       1, 2
#&gt; 2 2    1, 2, 3
#&gt; 3 3 1, 2, 3, 4</code></pre>
</div>
<div id="matrix-and-data-frame-columns" class="section level4">
<h4>Matrix and data frame columns</h4>
<p>虽然 R 允许将矩阵和 data frame
作为列，但最好不要这样使用，因为很多函数默认每一列都是向量，不兼容这种罕见的情况</p>
<div class="sourceCode" id="cb389"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="#cb389-1" aria-hidden="true" tabindex="-1"></a>dfm <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb389-2"><a href="#cb389-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> <span class="sc">*</span> <span class="dv">10</span></span>
<span id="cb389-3"><a href="#cb389-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb389-4"><a href="#cb389-4" aria-hidden="true" tabindex="-1"></a>dfm<span class="sc">$</span>y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb389-5"><a href="#cb389-5" aria-hidden="true" tabindex="-1"></a>dfm<span class="sc">$</span>z <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">b =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb389-6"><a href="#cb389-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb389-7"><a href="#cb389-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dfm)</span></code></pre></div>
<pre><code>#&gt; &#39;data.frame&#39;:    3 obs. of  3 variables:
#&gt;  $ x: num  10 20 30
#&gt;  $ y: int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
#&gt;  $ z:&#39;data.frame&#39;:   3 obs. of  2 variables:
#&gt;   ..$ a: int  3 2 1
#&gt;   ..$ b: chr  &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb391"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="#cb391-1" aria-hidden="true" tabindex="-1"></a>dfm</span></code></pre></div>
<pre><code>#&gt;    x y.1 y.2 y.3 z.a z.b
#&gt; 1 10   1   4   7   3   a
#&gt; 2 20   2   5   8   2   b
#&gt; 3 30   3   6   9   1   c</code></pre>
</div>
</div>
<div id="type-3" class="section level3">
<h3>Type</h3>
<ul>
<li><code>as.data.frame()</code> 将矩阵、列表强制转换为数据框
<ul>
<li>如果矩阵已有行、列名，会在转换过程中保留</li>
</ul></li>
</ul>
</div>
<div id="label-4" class="section level3">
<h3>Label</h3>
<p>适用于 matrix
的<code>rownames()</code>和<code>colnames()</code>也适用于数据框。</p>
<p>但<strong>rownames
不是一个好的设计，完全可以将其作为数据框的一列，尽量不要用</strong>。</p>
<div class="sourceCode" id="cb393"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="#cb393-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">lower =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">upper =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb393-2"><a href="#cb393-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(a)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb395"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="#cb395-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(a)</span></code></pre></div>
<pre><code>#&gt; NULL</code></pre>
<div class="sourceCode" id="cb397"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="#cb397-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(a)</span>
<span id="cb397-2"><a href="#cb397-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(b)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb399"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(b)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;id&quot;    &quot;lower&quot; &quot;upper&quot;</code></pre>
</div>
<div id="subset-4" class="section level3">
<h3>Subset</h3>
<p>既可以用列表风格的<code>[]</code>，也可以用矩阵风格的<code>[rowSelector, columnSelector]</code></p>
<ol style="list-style-type: decimal">
<li>矩阵风格选择器的好处在于，可以灵活地<strong>筛选行</strong></li>
</ol>
<div class="sourceCode" id="cb401"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="#cb401-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb401-2"><a href="#cb401-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb401-3"><a href="#cb401-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">lower =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>],</span>
<span id="cb401-4"><a href="#cb401-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">upper =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb401-5"><a href="#cb401-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb401-6"><a href="#cb401-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb401-7"><a href="#cb401-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 矩阵风格的选择器</span></span>
<span id="cb401-8"><a href="#cb401-8" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>id <span class="sc">&gt;</span> <span class="dv">3</span>, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]</span></code></pre></div>
<pre><code>#&gt;   lower upper
#&gt; 4     d     D
#&gt; 5     e     E</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>用矩阵风格的二维选择器时，跟矩阵一样会尽可能降维</li>
<li>如果纵向只取了一列，则返回值会自动简化为向量，而非数据框。</li>
<li>若要避免降维，保留数据框结构，可以结合两种风格的选择器，也可以增加选项<code>drop = FALSE</code>。</li>
<li><strong>最好是用 dplyr 中的函数替代选择器</strong>，用
<code>select()</code> 时不会降维，如果希望降维再用 <code>pull()</code>
即可，语义很明晰。</li>
</ol>
<div class="sourceCode" id="cb403"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 保留数据框</span></span>
<span id="cb403-2"><a href="#cb403-2" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">2</span>, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span></code></pre></div>
<pre><code>#&gt;   lower
#&gt; 2     b
#&gt; 3     c</code></pre>
<div class="sourceCode" id="cb405"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="#cb405-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, ][<span class="dv">2</span>] <span class="co"># 混合两种选择器</span></span></code></pre></div>
<pre><code>#&gt;   lower
#&gt; 2     b
#&gt; 3     c</code></pre>
<div class="sourceCode" id="cb407"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="#cb407-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, ] <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt;   lower
#&gt; 2     b
#&gt; 3     c</code></pre>
<div class="sourceCode" id="cb409"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 不保留数据框</span></span>
<span id="cb409-2"><a href="#cb409-2" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;b&quot; &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb411"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="#cb411-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, ] <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>()</span></code></pre></div>
<pre><code>#&gt; [1] &quot;b&quot; &quot;c&quot;</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><code>subset(df, conditions, select)</code></li>
</ol>
<p><strong>函数而非操作符，便利 Pipeline 的连续操作</strong></p>
<p>第一个参数为数据集，第二个参数选择符合条件的行，第三个参数select选择列，可以在列名前加’-’删除之</p>
<div class="sourceCode" id="cb413"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(leadership, age <span class="sc">&gt;=</span> <span class="dv">35</span> <span class="sc">|</span> age <span class="sc">&lt;</span> <span class="dv">24</span>, <span class="at">select =</span> <span class="fu">c</span>(q1, q2, q3, q4))</span></code></pre></div>
</div>
<div id="extract-1" class="section level3">
<h3>Extract</h3>
<ul>
<li><code>df$colname</code></li>
<li><code>df[[index]]</code></li>
<li><code>df[["colname"]]</code></li>
<li>矩阵风格选择器，选择一列</li>
<li><code>dplyr::pull(df, colname)</code></li>
</ul>
<div class="sourceCode" id="cb414"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>lower</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</code></pre>
<div class="sourceCode" id="cb416"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</code></pre>
<div class="sourceCode" id="cb418"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">&quot;lower&quot;</span>]]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</code></pre>
<div class="sourceCode" id="cb420"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="#cb420-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</code></pre>
<div class="sourceCode" id="cb422"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">pull</span>(df, lower)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</code></pre>
</div>
<div id="operation-3" class="section level3">
<h3>Operation</h3>
<p>对数据框的精细操作是 R 最核心的内容，之后单列一章说明。</p>
<div id="增删改-1" class="section level4">
<h4>增删改</h4>
<p>类似 list、matrix，以赋值为核心。</p>
</div>
<div id="数据框合并" class="section level4">
<h4>数据框合并</h4>
<p><code>rbind()</code>, <code>cbind()</code></p>
</div>
<div id="描述统计" class="section level4">
<h4>描述统计</h4>
<p><code>summary()</code> 描述统计各列数据</p>
<div class="sourceCode" id="cb424"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mtcars)</span></code></pre></div>
<pre><code>#&gt;       mpg             cyl             disp             hp       
#&gt;  Min.   :10.40   Min.   :4.000   Min.   : 71.1   Min.   : 52.0  
#&gt;  1st Qu.:15.43   1st Qu.:4.000   1st Qu.:120.8   1st Qu.: 96.5  
#&gt;  Median :19.20   Median :6.000   Median :196.3   Median :123.0  
#&gt;  Mean   :20.09   Mean   :6.188   Mean   :230.7   Mean   :146.7  
#&gt;  3rd Qu.:22.80   3rd Qu.:8.000   3rd Qu.:326.0   3rd Qu.:180.0  
#&gt;  Max.   :33.90   Max.   :8.000   Max.   :472.0   Max.   :335.0  
#&gt;       drat             wt             qsec             vs        
#&gt;  Min.   :2.760   Min.   :1.513   Min.   :14.50   Min.   :0.0000  
#&gt;  1st Qu.:3.080   1st Qu.:2.581   1st Qu.:16.89   1st Qu.:0.0000  
#&gt;  Median :3.695   Median :3.325   Median :17.71   Median :0.0000  
#&gt;  Mean   :3.597   Mean   :3.217   Mean   :17.85   Mean   :0.4375  
#&gt;  3rd Qu.:3.920   3rd Qu.:3.610   3rd Qu.:18.90   3rd Qu.:1.0000  
#&gt;  Max.   :4.930   Max.   :5.424   Max.   :22.90   Max.   :1.0000  
#&gt;        am              gear            carb      
#&gt;  Min.   :0.0000   Min.   :3.000   Min.   :1.000  
#&gt;  1st Qu.:0.0000   1st Qu.:3.000   1st Qu.:2.000  
#&gt;  Median :0.0000   Median :4.000   Median :2.000  
#&gt;  Mean   :0.4062   Mean   :3.688   Mean   :2.812  
#&gt;  3rd Qu.:1.0000   3rd Qu.:4.000   3rd Qu.:4.000  
#&gt;  Max.   :1.0000   Max.   :5.000   Max.   :8.000</code></pre>
</div>
</div>
</div>
<div id="tibble" class="section level2">
<h2>tibble</h2>
<p>data.frame 的优化替代类型，但<strong>已有更好的替代类型
data.table，所以 tibble 不再重要</strong></p>
<p>tibble 打印时</p>
<ul>
<li>列出了变量的类型</li>
<li>只显示10行</li>
<li>只显示有限的列数（与屏幕适应的）</li>
<li>高亮 <code>NAs</code></li>
</ul>
<div id="create-5" class="section level3">
<h3>Create</h3>
<p>tibble
有一个很突出的优点：创建时，写在后面的变量可以立即使用前面的变量</p>
<div class="sourceCode" id="cb426"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 这种写法如果用 data.table，会报错，表示不知道 b 定义式中的 a 是什么</span></span>
<span id="cb426-2"><a href="#cb426-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb426-3"><a href="#cb426-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">runif</span>(<span class="dv">1000</span>, <span class="dv">0</span>, <span class="dv">5</span>),</span>
<span id="cb426-4"><a href="#cb426-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="dv">4</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="at">mean =</span> <span class="fl">3.2</span> <span class="sc">*</span> a, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb426-5"><a href="#cb426-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>#&gt; # A tibble: 6 × 2
#&gt;       a     b
#&gt;   &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 0.140  4.69
#&gt; 2 4.95  19.4 
#&gt; 3 2.24  10.6 
#&gt; 4 1.67   8.40
#&gt; 5 3.41  15.8 
#&gt; 6 4.75  20.2</code></pre>
<p>数据量不大时，可以用<code>tribble()</code>创建</p>
<div class="sourceCode" id="cb428"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb428-2"><a href="#cb428-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>x, <span class="sc">~</span>y, <span class="sc">~</span>z,</span>
<span id="cb428-3"><a href="#cb428-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;a&quot;</span>, <span class="dv">2</span>, <span class="fl">3.6</span>,</span>
<span id="cb428-4"><a href="#cb428-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;b&quot;</span>, <span class="dv">1</span>, <span class="fl">8.5</span></span>
<span id="cb428-5"><a href="#cb428-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="transfer" class="section level3">
<h3>Transfer</h3>
<p><code>as_tibble()</code></p>
</div>
<div id="subset-5" class="section level3">
<h3>Subset</h3>
<p>subset 时，即使选取单行或单列，结果也不会降维，仍然是 tibble</p>
</div>
<div id="operation-4" class="section level3">
<h3>Operation</h3>
<div class="sourceCode" id="cb429"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="fu">add_column</span>(df, <span class="at">w =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>) <span class="co"># 增加一列</span></span></code></pre></div>
<pre><code>#&gt; # A tibble: 2 × 4
#&gt;   x         y     z     w
#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
#&gt; 1 a         2   3.6     0
#&gt; 2 b         1   8.5     1</code></pre>
<div class="sourceCode" id="cb431"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="fu">add_row</span>(df, <span class="at">x =</span> <span class="st">&quot;c&quot;</span>, <span class="at">y =</span> <span class="dv">9</span>, <span class="at">z =</span> <span class="fl">2.1</span>) <span class="co"># 增加一行</span></span></code></pre></div>
<pre><code>#&gt; # A tibble: 3 × 3
#&gt;   x         y     z
#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 a         2   3.6
#&gt; 2 b         1   8.5
#&gt; 3 c         9   2.1</code></pre>
<div class="sourceCode" id="cb433"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="fu">add_row</span>(df, <span class="at">x =</span> <span class="st">&quot;c&quot;</span>, <span class="at">y =</span> <span class="dv">9</span>, <span class="at">z =</span> <span class="fl">2.1</span>, <span class="at">.before =</span> <span class="dv">2</span>) <span class="co"># 在第二行，增加一行</span></span></code></pre></div>
<pre><code>#&gt; # A tibble: 3 × 3
#&gt;   x         y     z
#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 a         2   3.6
#&gt; 2 c         9   2.1
#&gt; 3 b         1   8.5</code></pre>
<ol style="list-style-type: decimal">
<li><code>print(tibble, n = 10, width = Inf)</code>可以自定义打印的长度和宽度。默认只显示10行，避免输出太长.
<ol style="list-style-type: decimal">
<li>也可以用<code>options(tibble.print_max=n, tibble.print_min=m)</code>进行全局性设置：如果多于m行，则最多打印出n行。</li>
</ol></li>
<li>对于很大的数据表，也可以用<code>%&gt;% View()</code>或<code>%T&gt;% View()</code>查看</li>
<li>tibble
不支持行名。<code>tibble::rownames_to_column(df, var = "rowname")</code>可以将行名转化为一列，<code>tibble::rowid_to_column(df, var = "rowid")</code>将行
index 转化为一列。</li>
</ol>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>若不转置，这个运算根本无法进行。<a href="#fnref1"
class="footnote-back">↩︎</a></p></li>
</ol>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIlZlY3Rvcu+8iOW5v+S5ieWQkemHj++8iSINCnN1YnRpdGxlOiAnQXRvbWljIFZlY3RvciwgTWF0cml4LCBMaXN0IGFuZCBEYXRhZnJhbWUnDQphdXRob3I6ICJIdW1vb24iDQpkYXRlOiAiYHIgU3lzLkRhdGUoKWAiDQpvdXRwdXQ6IGh0bWxfZG9jdW1lbnQNCmRvY3VtZW50Y2xhc3M6IGN0ZXhhcnQNCmNsYXNzb3B0aW9uOiBoeXBlcnJlZiwNCi0tLQ0KDQpgYGB7ciBzZXR1cCwgaW5jbHVkZSA9IEZBTFNFfQ0Kc291cmNlKCIuLi9SbWFya2Rvd24tdGVtcGxhdGUvUm1hcmtkb3duX2NvbmZpZy5SIikNCg0KIyMgZ2xvYmFsIG9wdGlvbnMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCmtuaXRyOjpvcHRzX2NodW5rJHNldCgNCiAgd2lkdGggPSBjb25maWckd2lkdGgsDQogIGZpZy53aWR0aCA9IGNvbmZpZyRmaWcud2lkdGgsDQogIGZpZy5hc3AgPSBjb25maWckZmlnLmFzcCwNCiAgb3V0LndpZHRoID0gY29uZmlnJG91dC53aWR0aCwNCiAgZmlnLmFsaWduID0gY29uZmlnJGZpZy5hbGlnbiwNCiAgZmlnLnBhdGggPSBjb25maWckZmlnLnBhdGgsDQogIGZpZy5zaG93ID0gY29uZmlnJGZpZy5zaG93LA0KICB3YXJuID0gY29uZmlnJHdhcm4sDQogIHdhcm5pbmcgPSBjb25maWckd2FybmluZywNCiAgbWVzc2FnZSA9IGNvbmZpZyRtZXNzYWdlLA0KICBlY2hvID0gY29uZmlnJGVjaG8sDQogIGV2YWwgPSBjb25maWckZXZhbCwNCiAgdGlkeSA9IGNvbmZpZyR0aWR5LA0KICBjb21tZW50ID0gY29uZmlnJGNvbW1lbnQsDQogIGNvbGxhcHNlID0gY29uZmlnJGNvbGxhcHNlLA0KICBjYWNoZSA9IGNvbmZpZyRjYWNoZSwNCiAgY2FjaGUuY29tbWVudHMgPSBjb25maWckY2FjaGUuY29tbWVudHMsDQogIGF1dG9kZXAgPSBjb25maWckYXV0b2RlcA0KKQ0KYGBgDQoNCiMjIFZlY3RvciDnmoTliIbnsbsNCg0KMS4gYXRvbWljIHZlY3RvciwgbWF0cml4LCBhcnJheSDpg73opoHmsYLljZXkuIDmlbDmja7nsbvlnosgKGhvbW9nZW5lb3VzIGRhdGEgdHlwZSnvvIwqKuagueWfuuaYryBhdG9taWMgdmVjdG9yKioNCiAgIDEuIGF0b21pYyB2ZWN0b3Ig5re75Yqg57u05bqm5bGe5oCn5Y+v55Sf5oiQIG1hdHJpeCwgYXJyYXkNCiAgIDIuIGF0b21pYyB2ZWN0b3Ig5re75YqgIGNsYXNzIOWxnuaAp+WPr+eUn+aIkCBmYWN0b3IsIGRhdGUg5ZKMIGRhdGUtdGltZQ0KMi4gbGlzdCwgZGF0YS5mcmFtZSDlj6/ku6Xoo4Xovb3kuI3lkIzmlbDmja7nsbvlnosgKGhldGVyb2dlbmVvdXMgZGF0YSB0eXBlcynvvIwqKuagueWfuuaYryBsaXN0KioNCiAgIDEuIOWIl+ihqCoq5o+Q6auY5LqG5a2Y5YKo55qE54G15rS75oCnKirvvIzkvYYqKumZjeS9juS6huWtmOWCqOWSjOi/kOeul+aViOeOhyoqDQogICAyLiDmlbDmja7moYbmmK/kuIDnp43nibnmrornmoTliJfooagNCjMuIGF0b21pYyB2ZWN0b3Ig5ZKMIGxpc3Qg5Y+v57uf56ew5Li6IHZlY3Rvcg0KDQojIyMgZGF0YSB0eXBlcyBvZiBhdG9taWMgdmVjdG9yDQoNCiMjIyMgbG9naWNhbA0KDQpgVFJVRWAvYFRgIOWSjCBgRkFMU0VgL2BGYA0KDQrkuIDkupvooqvorr7lrprmjqXmlLbpgLvovpHovpPlhaXnmoTlh73mlbDkuZ/lj6/ku6XmjqXmlLbpnZ7pgLvovpHlkJHph4/vvIzkvovlpoLmlbDlgLzlkJHph4/jgILmraTml7bvvIzpnZ7pgLvovpHlkJHph4/kvJrooqvlvLrliLbovazmjaLmiJDpgLvovpHlkJHph4/vvJrpnZ7pm7bmlbDlgLzkvJrooqvlvLrliLbovazmjaLmiJAgVFJVRe+8jOWPquaciSAwIOS8muiiq+W8uuWItui9rOaNouaIkCBGQUxTRe+8m+Wtl+espuS4suS4jeiDveiiq+W8uuWItui9rOaNouaIkOmAu+i+keWAvO+8jOS8muaKpemUmeOAgg0KDQojIyMjIG51bWVyaWMNCg0K57uf56ew5pWw5YC85Z6LDQoNCi0g5pW05pWw77yMaW50ZWdlcu+8jOW9ouWmgiBgMkxgDQotIOWPjOeyvuW6pua1rueCueaVsO+8jGRvdWJsZQ0KICAgLSDkuInnp43nibnmrormg4XlhrXvvJpJbmYsIC1JbmYsIE5hTi4gDQogICAtIOWPquimgeihqOi+vuW8j+S4reacieato+i0n+aXoOept+eahOmhueWHuueOsO+8jOe7k+aenOWwseW+iOWPr+iDveS4uiBJbmYsIC1JbmYsIE5hTg0KDQpgYGB7cn0NCmV4cCgxMDAwKSAjIFIg5Lit5pWw5a2X55qE5LiK6ZmQ5Li6IDEuOCoxMF4zOO+8jOi2hei/h+i/meS4quinhOaooeWwseS8muWHuueOsCBJbmYgDQotMTAgLyAwICMgLUluZiDotJ/ml6DnqbcNCmV4cCgxMDAwKSAvIGV4cCg5OTApICMgTmFOLCBub3QgYSBudW1iZXINCmBgYA0KDQojIyMjIGNoYXJhY3Rvcg0KDQrlrZfnrKbkuLINCg0KIyMjIyBjb21wbGV4DQoNCuWkjeaVsO+8jOW9ouWmgiBgMSsyaWANCg0KIyMjIyDnqbrlgLwgYE5VTExgIOWSjOe8uuWkseWAvCBgTkFgDQoNCmBOVUxMYO+8jOmbtumVvyoq5ZCR6YePKirvvIzkuIDoiKzooajnpLrlj4LmlbDmnKrooqvotYvlgLzvvIzku6Xlj4rlh73mlbDmsqHmnInmmI7noa7ov5Tlm57lgLzml7bnmoTov5Tlm57jgILmiYDlsZ7nsbvjgIHmlbDmja7nsbvlnovlnYfkuLogIk5VTEwiDQoNCmBOQWDvvIzplb/luqbkuLogMSDnmoTpgLvovpHlkJHph4/vvIzooajnpLrmlbDmja7vvIjlhYPntKDvvInnmoTnvLrlpLHlgLzjgILmiYDlsZ7nsbvjgIHmlbDmja7nsbvlnovlnYfkuLogImxvZ2ljYWwiDQoNCuWIpOaWrSBOVUxMIOWSjCBOQSDkuI3og73nlKggYD09YO+8jOWPquiDveeUqCBgaXMubmEoKWAg5ZKMIGBpcy5udWxsKClgDQoNCmBgYHtyfQ0KYSA8LSBOVUxMDQphICMg5rOo5oSP5o6n5Yi25Y+w55qE6L6T5Ye65rKh5pyJIFsxXe+8jOmVv+W6pui/njHpg73msqHmnIkNCmxlbmd0aChhKQ0KY2xhc3MoYSkNCnR5cGVvZihhKQ0KYSA9PSBOVUxMICMg6L+U5Zue6ZW/5bqm5Li6MOeahOWQkemHj++8jOaXouS4jeaYryBUUlVFIOS5n+S4jeaYryBGQUxTRQ0KaXMubmEoYSkNCg0KYiA8LSBOQQ0KYg0KbGVuZ3RoKGIpDQpjbGFzcyhiKQ0KdHlwZW9mKGIpDQpiID09IE5BICMgTkEg6L+b6KGM5Lu75L2V6L+Q566X6YO96L+U5ZueIE5BDQppcy5udWxsKGIpDQpgYGANCg0KIyMjIyDmn6XnnIsgZGF0YSB0eXBlDQoNCmB0eXBlb2YoKWANCg0KMS4gdmVjdG9y44CBbWF0cml4IOi/lOWbnuWFtuS4reWFg+e0oOeahCBkYXRhIHR5cGUNCjIuIGxpc3TjgIFkYXRhLmZyYW1lIOi/lOWbniAibGlzdCINCg0KIyMjIGNvbWJpbmUgZGF0YQ0KDQrnu4TlkIgoY29tYmluZSwg5LiA6Iis5L2/55SoYGMoLi4uLCB1c2UubmFtZXMgPSBUUlVFKWAp5LiN5ZCM5pWw5o2u57G75Z6L55qE5ZCR6YeP5oiW5YiX6KGo5pe277yM5Lya5by65Yi26L2s5o2i5Li65YW85a655omA5pyJ5YWD57Sg55qE44CB5pu054G15rS755qE5pWw5o2u57G75Z6LDQoNCuS4gOiIrOmhuuW6j+S4uu+8mmxvZ2ljYWw8aW50ZWdlcjxudW1lcmljPGNvbXBsZXg8Y2hhcmFjdGVyPGxpc3QNCg0KYGBge3J9DQphIDwtIDE6Mg0KYiA8LSBsZXR0ZXJzWzE6Ml0NCmMoYSwgYikNCg0KbDQgPC0gbGlzdChsaXN0KDEsIDIpLCBjKDMsIDQpKQ0KbDUgPC0gYyhsaXN0KDEsIDIpLCBjKDMsIDQpKQ0Kc3RyKGw0KQ0Kc3RyKGw1KQ0KYGBgDQoNCiFbXShodHRwczovL2QzM3d1YnJma2kwbDY4LmNsb3VkZnJvbnQubmV0L2ViODFjNzA3MjM2NjRmMDkyMGQwZmQ0MTRlM2YzMjZiOWFkMWZhNmUvYzA2YWUvZGlhZ3JhbXMvdmVjdG9ycy9saXN0LWMucG5nKQ0KDQojIyMgYXR0cmlidXRlcw0KDQrlsZ7mgKfljbPkvZzkuLogbWV0YWRhdGEg55qE6ZSu5YC85a+577yM6ZmE5Yqg5Yiw5a+56LGh5LiKDQoNCiMjIyMg5bi455So5bGe5oCnDQoNCjEuIOmVv+W6pizvvIxgbGVuZ3RoKClgDQogICAxLiB2ZWN0b3LjgIFtYXRyaXgg6L+U5Zue5YW25Lit5YWD57Sg55qE5Liq5pWwDQogICAyLiBsaXN0IOi/lOWbnumUruWAvOWvueS4quaVsA0KICAgMy4g5pWw5o2u5qGG6L+U5Zue5YiX5pWw77yM5Zug5Li65q+P5YiX77yI5YiX5ZCNOuWAvOWQkemHj++8ieaYryBsaXN0IOeahOS4gOS4qumUruWAvOWvuQ0KMi4g55+p6Zi144CB5pWw57uE5ZKM5pWw5o2u5qGG55qE57u05bqm77yMYGRpbSgpYA0KICAgMS4gZGltKHZlY3Rvcikg5LiN5pivMe+8jCDogIzmmK8gTlVMTA0KMy4gbmFtZXPvvIznu5nmr4/kuKrlhYPntKDkuIDkuKogbmFtZSDnmoTmlbDlgLzlkJHph48NCiAgIDEuIGBuYW1lcygpWzwtXWAvYHNldE5hbWVzKClgIOiOt+WPli/orr7lrpogbmFtZXMg5bGe5oCn77yM6K6+572u5Li6IE5VTEwg5Y+v5Yig6ZmkIG5hbWVzIOWxnuaApw0KICAgMi4gYHVubmFtZSgpYCDljrvmjokgbmFtZXMg5bGe5oCn77yI6K+l6K+t5Y+l5Lmf5Lya55Sf5oiQ5LiA5Liq5paw5Y+Y6YeP77yJDQogICAzLiDku47mupDku6PnoIHlj6/nn6XvvIxgc2V0TmFtZXMoKWDlkoxgdW5uYW1lKClg5piv5Li65LqG6YWN5ZCI566h6YGT6ICM6K6+6K6h55qE6K+t5rOV57OW77yM5YaF6YOo6LCD55So55qE6L+Y5pivIGBuYW1lcygpPC1gDQoNCiMjIyMg5aSE55CG5Ye95pWwDQoNCi0gYGF0dHIoeCwgJ2EnKVs8LV1gIGdldCBhbmQgbW9kaWZ5IOWxnuaApw0KLSBgYXR0cmlidXRlcyh4KWAgZ2V0IOWFqOmDqOWxnuaApw0KLSBgc3RydWN0dXJlKC5EYXRhID0geCwgYXR0cjEgPSB2YWx1ZXMxLCBhdHRyMiA9IHZhbHVlczIsIC4uLilgIOaVtOS9k+iuvue9ruWFqOmDqOWxnuaAp+OAguS9huimgeazqOaEj++8muivpeivreWPpeS8mueUn+aIkOS4gOS4quaWsOWPmOmHj+OAgg0KDQpgYGB7cn0NCmF0dHIoYSwgInJvbWFuX2luZGV4IikgPC0gYygiSSIsICJJSSIpDQphDQphdHRyKGEsICJyb21hbl9pbmRleCIpIDwtIE5VTEwNCmENCmEgPC0gc3RydWN0dXJlKC5EYXRhID0gYSwgcm9tYW5faW5kZXggPSBjKCJJIiwgIklJIikpDQphDQoNCm5hbWVzKGEpIDwtIGINCmF0dHJpYnV0ZXMoYSkNCnN0cihhKQ0KYQ0KdW5uYW1lKGEpDQphDQphIDwtIHVubmFtZShhKQ0KYQ0KYGBgDQoNCiMjIyBjbGFzcyDlsZ7mgKfkuI4gUzMg5a+56LGhDQoNCua3u+WKoCBjbGFzcyDlsZ7mgKflkI7vvIzlr7nosaHlsIbooqvovazmjaLkuLogUzMg5a+56LGh77yM5Lyg6YCS57uZ5rOb5Z6L5Ye95pWw5pe25bCG5YW35pyJ54us54m555qE6KGM5Li6DQoNCiFbXShodHRwczovL2QzM3d1YnJma2kwbDY4LmNsb3VkZnJvbnQubmV0L2JhYTE5ZDBlYmY5Yjk3OTQ5YTdhZDI1OWIyOWExYzRhZTAzMWM4ZTIvOGU5YjgvZGlhZ3JhbXMvdmVjdG9ycy9zdW1tYXJ5LXRyZWUtczMtMS5wbmcpDQoNCiMjIyMgRmFjdG9yDQoNCmBgYHtyfQ0KeCA8LSBmYWN0b3IoYygnYScsICdiJywgJ2InLCAnYScpKQ0KeA0KdHlwZW9mKHgpDQphdHRyaWJ1dGVzKHgpDQp0YWJsZSh4KQ0KYGBgDQoNCiFbXShodHRwczovL2QzM3d1YnJma2kwbDY4LmNsb3VkZnJvbnQubmV0LzFjMTllYWJjNTlkNDQ1Y2FiNzhmYzYwNTA1M2M3MzkzZWM2MzBlMTUvNTg0M2IvZGlhZ3JhbXMvdmVjdG9ycy9mYWN0b3IucG5nKQ0KDQojIyMjIERhdGUNCg0KY2xhc3Mg5bGe5oCn77yaRGF0ZQ0KDQpgYGB7cn0NCnRvZGF5IDwtIFN5cy5EYXRlKCkNCnR5cGVvZih0b2RheSkNCmF0dHJpYnV0ZXModG9kYXkpDQp1bmNsYXNzKHRvZGF5KSAjIOS7jjE5NzDlubQx5pyIMeaXpeeul+i1tw0KYGBgDQoNCiMjIyMgRGF0ZS10aW1lDQoNCmNsYXNzIOWxnuaAp++8mlBPU0lYY3QNCg0KYGBge3J9DQpub3dfY3QgPC0gYXMuUE9TSVhjdCgiMjAxOC0wOC0wMSAyMjowMCIsIHR6ID0gIlVUQyIpDQpub3dfY3QNCnR5cGVvZihub3dfY3QpDQphdHRyaWJ1dGVzKG5vd19jdCkNCnVuY2xhc3Mobm93X2N0KSAjIOS7jjE5NzDlubQx5pyIMeaXpeeul+i1t+eahOenkuaVsA0KDQpzdHJ1Y3R1cmUobm93X2N0LCB0em9uZSA9ICJBc2lhL1Rva3lvIikNCnN0cnVjdHVyZShub3dfY3QsIHR6b25lID0gIkFtZXJpY2EvTmV3X1lvcmsiKQ0Kc3RydWN0dXJlKG5vd19jdCwgdHpvbmUgPSAiQXVzdHJhbGlhL0xvcmRfSG93ZSIpDQpzdHJ1Y3R1cmUobm93X2N0LCB0em9uZSA9ICJFdXJvcGUvUGFyaXMiKQ0KYGBgDQoNCiMjIyMgRHVyYXRpb24NCg0KY2xhc3Mg5bGe5oCn77yaZGlmZnRpbWUNCg0KYGBge3J9DQpvbmVfd2Vla18xIDwtIGFzLmRpZmZ0aW1lKDEsIHVuaXRzID0gIndlZWtzIikNCm9uZV93ZWVrXzENCnR5cGVvZihvbmVfd2Vla18xKQ0KYXR0cmlidXRlcyhvbmVfd2Vla18xKQ0KDQpvbmVfd2Vla18yIDwtIGFzLmRpZmZ0aW1lKDcsIHVuaXRzID0gImRheXMiKQ0Kb25lX3dlZWtfMg0KdHlwZW9mKG9uZV93ZWVrXzIpDQphdHRyaWJ1dGVzKG9uZV93ZWVrXzIpDQpgYGANCg0KIyMgQXRvbWljIFZlY3Rvcg0KDQoqKuazqOaEjyoqDQoNCjEuICBS5Lit5peg5qCH6YeP77yM5qCH6YeP6KKr6buY6K6k5Li66ZW/5bqm5Li6MeeahOWQkemHj++8jOaJgOS7peWcqOaOp+WItuWPsOaYvuekuuS4gOS4quaVsOaXtu+8jOWJjemdouS7jeS8muacieihqOekuuWQkemHj+e7tOW6pueahCBgWzFdYA0KMi4gIFLkuK3nmoTlkJHph4/pu5jorqTkuLrliJflkJHph4/vvIzkuI3lrZjlnKjooYzlkJHph4/jgILlr7nliJflkJHph4/ovaznva7vvIzlvpfliLDnmoTmmK/kuIDkuKokMVx0aW1lcyBuJOeahOefqemYtQ0KMy4gUuS4reeahOWfuuehgOi/kOeul+mDveaYr+WQkemHj+WMlueahA0KDQojIyMgQ3JlYXRlDQoNCiMjIyMgYHZlY3RvcigpYA0KDQotIGB2ZWN0b3IobW9kZSA9ICdkb3VibGUnLCBsZW5ndGggPSBOKWDvvIznlJ/miJDplb/luqbkuLogTiDnmoTnqbrlkJHph48NCiAgIC0g5Y+C5pWwIG1vZGUg5Y+v5Lul5Li6ICJpbnRlZ2VyIi8iZG91YmxlIi8ibnVtZXJpYyIvImxvZ2ljYWwiLyJjaGFyYWN0ZXIiIOetie+8jOS4uiAibGlzdCIg5YiZ55Sf5oiQ5YiX6KGoDQogICAtIOavj+mhueeahOWAvOS4uiBgMGAvYEZBTFNFYC9gIiJgL2BOVUxMYO+8iOeUn+aIkOWIl+ihqOaXtu+8iQ0KLSDlr7nkuo7nibnlrprmlbDmja7nsbvlnovnmoTlkJHph4/vvIzlj6/ku6XnroDlhpnkuLrvvJpgbnVtZXJpYyhOKWAsIGBsb2dpY2FsKE4pYCwgYGNoYXJhY3RlcihOKWANCg0K5YWoIDEg5ZCR6YeP55qE5YaZ5rOV5Li6YHZlY3RvcignbnVtZXJpYycsIE4pICsgMWDmiJZgbnVtZXJpYyhOKSArIDFg77yM5q+UIGByZXAoMSwgTilgIOeahOWPr+ivu+aAp+abtOWlvQ0KDQpgYGB7cn0NCnkgPC0gbnVtZXJpYyg2KSArIDENCnkNCnogPC0gbG9naWNhbCg3KQ0Keg0KdyA8LSBjaGFyYWN0ZXIoMikNCncNCncgPC0gYyh3LCAiYSIpDQp3DQpgYGANCg0KDQojIyMjIGBjKClgDQoNCue7hOWQiOWQkemHj++8iOWwhuWkmuS4quWNleWFg+e0oOWQkemHj+WSjOWkmuWFg+e0oOWQkemHj+i/nuaOpei1t+adpeaehOaIkOS4gOS4quWQkemHj++8ie+8jOWFtuS7luivreiogOS4gOiIrOeUqGBbXWANCg0KYGMoKWAg5Lit5Y2z5L2/5bWM5aWX77yM5Lmf5Lya6KKr6Ieq5Yqo5bGV5byA5Li6IGF0b21pYyB2ZWN0b3INCg0KYGBge3J9DQpjKDEsIDIsIGMoMywgNCwgNTo3KSkNCmBgYA0KDQpjcmVhdGUg5ZCR6YeP5pe25Y+v5Lul5ZG95ZCNDQoNCmBgYHtyfQ0KeCA8LSBjKGEgPSAxLCBiID0gMiwgYyA9IDMpDQp4DQpzdHIoeCkgIyDlj6/op4HlsZ7mgKcgbmFtZXMg5L+d5a2Y552A5YWD57Sg55qE5ZCN56ewDQpgYGANCg0KIyMjIyBgbTpuYA0KDQrov57nu63mlbTmlbDlkJHph4/vvIznsbvlnovkuLogaW50ZWdlciB2ZWN0b3INCg0KYGBge3J9DQp0eXBlb2YoMTozKQ0KYGBgDQoNCiMjIyMgYHNlcSooKWANCg0KLSBgc2VxKGZyb20sIHRvLCBieT0xLCBsZW5ndGgub3V0KWDvvIznrYnlt67mlbDliJfvvIznu5nlh7rkuInkuKrlj4LmlbDljbPlj68NCi0gYHNlcV9sZW4obilg77yM562J5Lu35LqOYDE6bmANCi0gKipgc2VxX2Fsb25nKHgpYO+8jOS4gOiIrOavlCBgMTpsZW5ndGgoeClgIOabtOWuieWFqCoqDQogICAtIOiLpSB4IOeahOmVv+W6puS4ujDvvIxgc2VxX2Fsb25nKHgpYOS8mui/lOWbnmBpbnRlZ2VyKDApYO+8jOiAjOmdnmBjKDEsIDApYA0KDQpgYGB7cn0NCnNlcV9hbG9uZyhMRVRURVJTKQ0KYGBgDQoNCiMjIyMgYHJlcCh4LCAuLi4pYA0KDQouLi4g5Lit55qE5Y+C5pWw5YyF5ous77yaDQoNCjEuIHRpbWVzLCDph43lpI3lr7nosaEgeCDmlbTkvZPnmoTmrKHmlbDvvIzkuIDoiKzkuLrmoIfph48NCiAgIDEuIOivpeWPguaVsOS5n+WPr+S7peaYr+S4jiB4IOmVv+W6puS4gOiHtOeahOWQkemHj++8jOihqOekuuWvueW6lOWFg+e0oOmHjeWkjeWvueW6lOasoeaVsA0KMi4gZWFjaCwg5a+5IHgg5Lit5q+P5Liq5YWD57Sg6YeN5aSN55qE5qyh5pWwDQozLiBsZW5ndGgub3V0LCDph43lpI3oi6XlubLmrKHlkI7nu5PmnpznmoTplb/luqYNCg0KYGBge3J9DQpyZXAoMTozLCB0aW1lcyA9IDIpDQpyZXAoMTozLCB0aW1lcyA9IGMoMiwgNCwgMSkpDQpyZXAoMTozLCBlYWNoID0gMikNCnJlcCgxOjMsIGxlbmd0aC5vdXQgPSA5KQ0KcmVwKDE6MywgbGVuZ3RoLm91dCA9IDEwKQ0KYGBgDQoNCiMjIyBUeXBlDQoNCi0gICBgY2xhc3MoKWAg5oiWIGB0eXBlb2YoKWAg5p+l55yL57G75Z6LDQotICAgYGlzLiooKWAg5Yik5pat57G75Z6LDQogICAtIOWPr+S7peS9v+eUqCBgaXMubG9naWNhbCgpYCwgYGlzLmludGVnZXIoKWAsIGBpcy5kb3VibGUoKWAsIGBpcy5jaGFyYWN0ZXIoKWAgDQogICAtIOWwvemHj+S4jeimgeS9v+eUqCBgaXMudmVjdG9yKClgLCBgaXMuYXRvbWljKClgLCBgaXMubnVtZXJpYygpYA0KLSAgIGBhcy4qKClgIOi9rOaNouexu+Weiw0KICAgLSDlsL3ph4/kuI3opoHkvb/nlKhgYXMudmVjdG9yKClgDQoNCmBgYHtyfQ0KY2xhc3MoMTo1KQ0KDQpjbGFzcyhjKFQsIEYsIFQpKQ0KDQppcy5jaGFyYWN0ZXIoYygiaCIsICJlIiwgImwiLCAibCIsICJvIikpDQoNCmFzLmNoYXJhY3RlcigxOjUpDQoNCnN0cmluZ3MgPC0gYygiMSIsICIyIiwgIjMiKQ0KdHJ5KHN0cmluZ3MgKyAxMCkNCnRyeShhcy5udW1lcmljKHN0cmluZ3MpICsgMTApDQpgYGANCg0KIyMjIFNpemUNCg0KYGxlbmd0aCgpYA0KDQpgYGB7cn0NCmxlbmd0aCh3KQ0KYGBgDQoNCiMjIyBMYWJlbA0KDQpgbmFtZXMoKVs8LV1gIOaPkOWPli/otYvlgLwNCg0K6LWL5YC85Li6IE5VTEwg5pe256e76ZmkIG5hbWVzIOWxnuaAp++8jOaIlumAmui/hyBgeCA8LSB1bm5hbWUoeClgDQoNCiMjIyBTdWJzZXQNCg0KIyMjIyDpgInmi6nlmahgW11g5ZKM5o+Q5Y+W5ZmoYFtbXV1gDQoNCmBbXWDkuLrlrZDpm4bpgInmi6nlmajvvIzov5Tlm57nmoTmmK/ljp/mlbDmja7nmoTkuIDkuKrliIfniYfvvIzkuI3mlLnlj5jmlbDmja7nu5PmnoQNCg0KYFtbXV1g5Li65YWD57Sg5o+Q5Y+W5Zmo77yM6L+U5Zue55qE5piv5Y6f5pWw5o2u5LiA5LiqKirplb/luqbkuLox55qE5YiH54mHKirkuK3oo4Xovb3nmoTlhoXlrrkNCg0K5a+55ZCR6YeP5pON5L2c77yMYFtdYOWSjGBbW11dYOeahOW3ruWIq+W+iOWwj++8m+S9huWvueabtOWkjeadgueahOaVsOaNruexu+Wei++8jOS6jOiAheeahOW3ruWIq+S8muW+iOaYjuaYvu+8mg0KDQpgYGB7cn0NCnN0cihpcmlzKSAjIOaVsOaNruahhg0KDQpzdHIoaXJpc1sxXSkgIyDlj6rlkKvkuIDkuKrlj5jph4/nmoTmlbDmja7moYYNCg0Kc3RyKGlyaXNbWzFdXSkgIyDlkJHph48NCmBgYA0KDQojIyMjIGBbXWDpgInlj5bnmoTkuInnp43mlrnlvI8NCg0KLSDkvY3nva4gaW5kZXjvvIxgeFs0XTsgeFstMjotNF07IHhbYygxLCAzKV1gDQogICAtIOWFtuS4reato+aVsOihqOekuumAieaLqe+8jOWkjeaVsOihqOekuuWJlOmZpO+8jGBbXWDkuK3kuI3og73lkIzml7bmnInmraPmlbDlkozotJ/mlbANCiAgIC0gaW5kZXgg5Li6IDAg5bCG6L+U5Zue6ZW/5bqm5Li6IDAg55qE5ZCR6YePDQogICAtIGluZGV4IOS4uuepuuihqOekuuS/neeVmei/meS4gOe7tOW6pueahOaJgOacieWFg+e0oA0KLSBsb2dpY2FsIHZlY3Rvciwg6YCJ5Ye655u45bqU5L2N572u5Li6IFRSVUUg55qE5YWD57SgDQogICAtIOmAmui/hyBjb25kaXRpb24g6I635b6X6YC76L6R5ZCR6YeP77yMYHhbeCA9PSAxMF07IHhbeCAlaW4lIGMoMSwgMiwgNSldYA0KLSBuYW1lcyDlsZ7mgKfvvIxgeFsiYXBwbGUiXWANCg0KYGBge3J9DQp4IDwtIGMoMSwgMiwgMywgNCwgNSwgNiwgNykNCm5hbWVzKHgpIDwtIGxldHRlcnNbMTo3XQ0KDQojIGluZGV4DQp4WzM6NV0gIyB45ZCR6YeP5Lit55qE56ysMy015Liq5YWD57SgDQp4W2MoMSwgNCldIDwtIGMoMTAwLCA0MDApICMg56ysMeS4quWSjOesrDTkuKrlhYPntKANCngNCnhbNjo5XSAjIOi2heWHumluZGV45pe26L+U5ZueIE5BDQp4DQp4WzEwXSA8LSAxMCAjIOWvueS4gOS4quW5tuS4jeWtmOWcqOeahOWFg+e0oOmHjeaWsOi1i+WAvO+8jOWwhuiHquWKqOeUqCBOQSDloavlhYXmnKrooqvmjIflrprnmoTkvY3nva4NCngNCnhbLTJdICMg6Zmk5LqG56ys5LqM5Liq5Lul5aSW55qE5YWD57SgDQp4Wy0yOi00XSAjIOetieS7t+S6jiB4W2MoLTIsIC0zLCAtNCld77yM5Y2z5Y675o6J56ysMuOAgTPjgIE05Liq5YWD57SgDQoNCiMgY29uZGl0aW9uDQp4W3ggJWluJSBjKDEsIDIsIDUpXQ0KDQojIG5hbWVzDQp4WyJlIl0NCnhbYygiZSIsICJqIildICMg6K6/6Zeu5LiN5a2Y5Zyo55qEbmFtZe+8jOi/lOWbniBOQQ0KYGBgDQoNCiMjIyMgQXBwbGljYXRpb246IGxvb2t1cCB0YWJsZQ0KDQpgYGB7cn0NCnggPC0gYygibSIsICJmIiwgInUiLCAiZiIsICJmIiwgIm0iLCAibSIpDQpsb29rdXAgPC0gYyhtID0gIk1hbGUiLCBmID0gIkZlbWFsZSIsIHUgPSBOQSkgIyDplK7lgLzlr7kNCmxvb2t1cFt4XSAlPiUgdW5uYW1lKCkNCmBgYA0KDQojIyMjIGBbW11dYOW/veeVpSBuYW1lcw0KDQpgW1tdXWAg5Y+q6IO95o+Q5Y+W5LiA5Liq5YWD57Sg77yM5YW25Lit5Lmf5LiN6IO95Ye6546w6LSf5pW05pWw5oiW6K6/6Zeu5LiN5a2Y5Zyo55qE5YWD57Sg77yI5LiL5qCH6LaK55WM77yJDQoNCmBgYHtyfQ0KeCA8LSBjKGEgPSAxLCBiID0gMiwgYyA9IDMpDQp4WyJhIl0NCnhbWyJhIl1dDQoNCnRyeSh4W1stMV1dKQ0KdHJ5KHhbWzRdXSkNCnRyeSh4W1siZCJdXSkNCmBgYA0KDQojIyMjIOS4i+agh+i2iueVjA0KDQrov5Tlm54gTkENCg0KIyMjIEluZGV4DQoNCiMjIyMgYHdoaWNoKmANCg0KLSAgIGB3aGljaCjpgLvovpHooajovr7lvI8pYA0KLSAgIGB3aGljaC5taW4oKWANCi0gICBgd2hpY2gubWF4KClgDQoNCmBgYHtyfQ0KeA0Kd2hpY2gubWF4KHgpDQp3aGljaC5taW4oeCkNCndoaWNoKHggPT0gMikNCndoaWNoKHggPiA0KQ0KYGBgDQoNCiMjIyMgYCptYXRjaGANCg0KLSAgIGBtYXRjaCh2ZWN0b3IxLCB2ZWN0b3IyKWDov5Tlm57nrKzkuIDkuKrlkJHph4/kuK3lkITlhYPntKDlnKjnrKzkuozkuKrlkJHph4/kuK3nmoTkvY3nva7luo/liJfvvIzmr4/kuIDkuKrpg73ku47lpLTlvIDlp4vljLnphY3vvIzlj6ropoHljLnphY3liLDlsLHnu5PmnZ/jgIINCg0KLSAgIGBwbWF0Y2godmVjdG9yMSwgdmVjdG9yMilg77yM6Iul56ys5LiA5Liq5ZCR6YeP5Lit5p+Q5YWD57Sg5Zyo56ys5LqM5Liq5ZCR6YeP5Lit5Yy56YWN5LiK5LqG77yM5YiZ6K6k5Li656ys5LqM5Liq5ZCR6YeP5Lit55u45bqU5YWD57Sg5bey6KKr5Y2g55So77yM5YaN5Yy56YWN56ys5LiA5Liq5ZCR6YeP5Lit55qE5LiL5LiA5Liq5YWD57Sg5pe277yM6Lez6L+H56ys5LqM5Liq5ZCR6YeP5Lit5pu+6KKr5Yy56YWN6L+H55qE5YWD57Sg44CCDQoNCmBgYHtyfQ0KbWF0Y2gocmVwKDEsIDMpLCByZXAoMSwgNSkpDQpwbWF0Y2gocmVwKDEsIDMpLCByZXAoMSwgNSkpDQpgYGANCg0KDQoNCiMjIyBPcGVyYXRpb24NCg0KUiDlr7nlkJHph4/nmoTmk43kvZzpg73opoHlnKjljp/lkJHph4/nmoTmi7fotJ3kuIrov5vooYzvvIzkuI3mlLnlj5jljp/lkJHph4/vvIjlj6rmnInnm7TmjqXotYvlgLzog73mlLnlj5jljp/lkJHph4/vvInjgILlpb3lpITmmK/lronlhajvvIzlnY/lpITmmK/mhaLjgIINCg0KDQojIyMjIOWinuWIoOaUuQ0KDQotICAgYGFwcGVuZCgpYCDov5Tlm57mj5LlhaXlhYPntKDlkI7nmoTmi7fotJ0uIDxzcGFuIHN0eWxlPSdjb2xvcjpyZWQnPioq5rOo5oSP77yMUiDkuK3kuIDoiKzkuI3nm7TmjqXkv67mlLnljp/lr7nosaHvvIzmiYDku6XlpoLmnpzopoHkv53nlZnov5nkuKrmk43kvZzvvIzkuIDlrpropoHorrDlvpfotYvlgLznu5nljp/lj5jph4/jgIIqKjwvc3Bhbj4NCi0gICBgeCA8LSB4Wy1pbmRleF1gIOWIoOmZpOmAiembhg0KLSAgIGByZXBsYWNlKClgIOaJuemHj+abv+aNog0KDQpgYGB7cn0NCnggPC0gYygxLCAyLCAzLCA0LCA1LCA3KQ0KeCA8LSByZXBsYWNlKHgsIGMoMywgNCksIGMoNSwgNSkpICMg5pu/5o2i77ya5bCGeOWQkemHj+S4reesrDPkuKrlkoznrKw05Liq5YWD57Sg5pu/5o2i5Li6NQ0KeA0KDQphcHBlbmQoeCwgMTAwLCBhZnRlciA9IDIpDQp4DQoNCmEgPC0gYygwLCAwLCAxLCAyLCAwLCAzKSAjIOWIoOmZpOmbtuWAvOmhuQ0KYiA8LSB3aGljaChhID09IDApDQpiDQphIDwtIGFbLWJdDQphDQpgYGANCg0KIyMjIyBTb3J0DQoNCi0gYHJhbmsoeClg6L+U5ZueeOS4reWQhOWFg+e0oOebuOWvueWkp+Wwj+eahOaOkuW6j++8iOm7mOiupOWNh+W6j++8iQ0KLSBgb3JkZXIoeClg6L+U5Zue5oyJ54Wn6YCS5aKeL+mAkuWHj+eahOasoeW6j+mHjeaOkuWIl3jlkI7vvIzmlrDluo/liJflkITlhYPntKDlnKjljp/luo/liJd45Lit55qE5L2N572uDQotIGBzb3J0KHgpYOi/lOWbnuaOkuW6j+WQjueahOWQkemHj++8jOWvueS6juaVsOWtl+m7mOiupOWNh+W6j++8jOWvueS6juWtl+espuS4sum7mOiupOWtl+WFuOmhuuW6jw0KLSBgcmV2KHgpYOmAhuW6j+aOkuWIlw0KDQpgYGB7cn0NCngNCnJhbmsoeCkNCg0Kc29ydCh4KSAjIOm7mOiupOWNh+W6j+aOkuW6jw0KeA0KDQpyZXYoeCkgIyDpgIbluo8NCngNCmBgYA0KDQojIyMjIOWOu+mHjeOAgeWBj+enu+OAgeW3ruWIhg0KDQotICAgYHVuaXF1ZSgpYCDljrvph40NCi0gICBgbGVhZCh4LCBuPTEpYCwgYGxhZyh4LCBuPTEpYCDlgY/np7vvvIzov5Tlm57kuIDkuKrluo/liJfnmoTpooblhYjluo/liJflkozmu57lkI7luo/liJcNCi0gICBgZGlmZih4LCBsYWc9MSlgIOW3ruWIhu+8jGxhZyDnlKjku6XmjIflrprmu57lkI7lh6DpobnjgILpu5jorqTnmoQgbGFnIOWAvOS4uiAxDQoNCmBgYHtyfQ0KdW5pcXVlKHgpDQp4DQoNCmxlYWQoeCwgMikNCngNCg0KZGlmZih4KQ0KeA0KYGBgDQoNCiMjIyMg57uf6K6h5p2h5Lu26aKR5pWwDQoNCmBzdW0odmVjdG9y5Lit5YWD57Sg6KaB56ym5ZCI55qE5p2h5Lu2KWANCg0KYGBge3J9DQojIDEg55qE5Liq5pWwDQp2ZWN0b3IgPC0gYygxLCAtMSwgMiwgLTIsIDMsIDQsIDAsIDIsIDMsIDQsIDEsIDEpDQpzdW0odmVjdG9yID09IDEpDQpgYGANCg0KIyMjIyDkuqTlj4nlvqrnjq/pgY3ljoYNCg0KYGV4cGFuZC5ncmlkKC4uLiwgc3RyaW5nc0FzRmFjdG9ycyA9IFRSVUUpYO+8jC4uLuWPguaVsOS4uuiLpeW5suS4quWQkemHj++8jOavlOWmguaVsOWAvOWQkemHjyB4IOWSjCB577yM5pWI5p6c5Li6Kirlr7nkuozlhYPmlbDlgLzlr7kgKHgsIHkpIOaJgOacieWPr+iDveWPluWAvOeahOmBjeWOhu+8iOi/lOWbnuaVsOaNruahhu+8iSoq44CCDQoNCuiLpSAuLi4g5Li65a2X56ym5Liy5ZCR6YeP77yM5pyA5aW95bCGIHN0cmluZ3NBc0ZhY3RvcnMg5Y+C5pWw6K6+572u5Li6IFRSVUUNCg0KYGBge3J9DQp4IDwtIDE6Mw0KeSA8LSBsZXR0ZXJzWzE6M10NCnogPC0gMTozDQpleHBhbmQuZ3JpZCh4LCB5KQ0KZXhwYW5kLmdyaWQoeCwgeikNCmBgYA0KDQojIyMjIOeul+aVsOi/kOeulw0KDQrlkJHph4/ljJbov5DnrpfvvJrlr7nlupTlhYPntKDliIbliKvov5DnrpfvvIzovoPnn63nmoTlkJHph4/oh6rliqjlvqrnjq/nm7Toh7Pplb/luqbkuI7ovoPplb/lkJHph4/ljLnphY0NCg0K5ZCR6YeP5YWD57Sg55qEIG5hbWVzIOS4jeWPguS4jui/kOeul++8jOS9hui/kOeul+espuW3puS+p+WQkemHj+eahCBuYW1lcyDkvJrkv53nlZnlnKjnu5PmnpzkuK3vvIzlj7PkvqflkJHph4/nmoQgbmFtZXMg6KKr5b+955WlDQoNCmBgYHtyfQ0KIyMg5Zub5YiZ6L+Q566XKCstKi8p44CB5bmCKF4p44CB5Y+W5pW0KCUvJSnjgIHlj5bkvZkoJSUpDQoxIC8gKDE6NikgIyDoh6rliqjlsIbmoIfph4/vvIjplb/luqbkuLogMSDnmoTlkJHph4/vvInmianlsZXkuLrplb/luqbkuLogNiDnmoTlkJHph4/lkI7lho3ov5DnrpcNCjEgLyBtYXRyaXgoMTo0LCBucm93ID0gMikgIyDoh6rliqjlsIbmoIfph4/mianlsZXkuLrlr7nlupTnu7TluqbnmoTnn6npmLXlkI7lho3ov5DnrpcNCg0KeCA8LSAxOjUNCnkgPC0gMjo2DQp4ICogeSAjIOWTiOi+vumprOenrw0KDQoNCiMjIOWQkemHj+WGheenr++8iOS7peS4i+WGmeazleetieS7t++8iQ0KMSAqIDIgKyAyICogMyArIDMgKiA0ICsgNCAqIDUgKyA1ICogNg0Kc3VtKHggKiB5KQ0KdCh4KSAlKiUgeSAjIOWIqeeUqOefqemYteS5mOazle+8jOazqOaEjyBSIOS4reWQkemHj+m7mOiupOS4uuWIl+WQkemHjw0KY3Jvc3Nwcm9kKHgsIHkpICMg5Yip55So55+p6Zi15LmY5rOV77yM5b6X5Yiw5LiA5LiqIDEqMSDnn6npmLUNCg0KDQojIyDlkJHph4/lpJbnp6/vvIjku6XkuIvlhpnms5XnrYnku7fvvIkNCnggJSolIHQoeSkNCnggJW8lIHkNCmtyb25lY2tlcih4LCB0KHkpKSAjIOWFi+e9l+WGheWFi+enrw0Kb3V0ZXIoeCwgeSkNCnRjcm9zc3Byb2QoeCwgeSkNCmBgYA0KDQojIyMjIOmAu+i+kei/kOeulw0KDQpgYGB7cn0NCnggPC0gMTo2DQp4IDwgNA0KYWxsKHggPiA1KSAjIOS4gOS4quWQkemHj+eahOaJgOacieWFg+e0oOaYr+WQpua7oei2s+afkOadoeS7tg0KYW55KHggPiA1KSAjIOS4gOS4quWQkemHj+eahOmDqOWIhuWFg+e0oOaYr+WQpua7oei2s+afkOadoeS7tg0KDQptYXRyaXgoeCwgMiwgYnlyb3cgPSBUKSA8IDQNCmBgYA0KDQojIyMjIOmbhuWQiOi/kOeulw0KDQpgYGB7cn0NCmludGVyc2VjdChjKDEsIDIsIDMsIDMsIDEyLCA0LCAxMjMsIDEyKSwgYygxLCAyLCAzKSkgIyDkuqQNCg0KdW5pb24oYygi54uX54aK5LyaIiwgIuiBmuaVsOaNruiLseaJjSIpLCBjKCLni5fnhorkvJoiLCAi5Yqp5Lqn5Lia5oyv5YW0IikpICMg5bm2DQoNCnNldGRpZmYoMTA6MiwgNTozKSAjIOW3rg0KYGBgDQoNCiMjIE1hdHJpeA0KDQojIyMgQ3JlYXRlDQoNCiMjIyMg5ZCR6YeP6L2s5YyW5Li655+p6Zi1DQoNCjEuIGBtYXRyaXgodmVjdG9yLCBucm93LCBuY29sLCBieXJvdyA9IEZBTFNFLCBkaW1uYW1lcyA9IE5VTEwpYO+8jOm7mOiupOaMieWIl+Whq+WFheefqemYte+8jGJ5cm93IOiuvuS4uiBUUlVFIOWPr+aMieihjA0KDQoyLiAg5Li65ZCR6YeP5re75Yqg57u05bqm5bGe5oCnIGBkaW0odmVjdG9yKSA8LSBjKG5yb3csbmNvbClgDQoNCmBgYHtyfQ0KIyMg55Sf5oiQIDMqMyDnmoTlhaggMSDnn6npmLUNCg0KIyDnrKzkuIDnp40NCnJlcCgxLCA5KSAlPiUgbWF0cml4KG5yb3cgPSAzKQ0KDQojIOesrOS6jOenjQ0KeCA8LSByZXAoMSwgOSkNCmRpbSh4KSA8LSBjKDMsIDMpDQp4ICMg6L+Z56eN5pa55byP5pS55Y+Y5LqG5Y+Y6YePIHgg55qE5YC877yM5LiN5piv5b6I5o6o6I2Q77yM6L+Y5piv56ys5LiA56eN5pu05aW9DQpgYGANCg0KIyMjIyBgZGlhZygpYA0KDQoxLiBgZGlhZyh4ID0gMSwgbnJvdywgbmNvbCwgbmFtZXMgPSBUUlVFKWANCiAgIDEuIHgg5Li65qCH6YeP5oiW5ZCR6YeP5pe277yMYGRpYWcoKWDooajnpLrmoLnmja7lr7nop5LlhYMgY3JlYXRlIOefqemYtQ0KICAgMi4geCDkuLrnn6npmLXml7bvvIxgZGlhZygpYOS4uuaPkOWPluWvueinkuWFg++8jOi/lOWbnuWQkemHjw0KICAgMy4geCDkuLrmoIfph4/kuJTlj6rmnInov5nkuIDkuKrlj4LmlbDml7bvvIzov5Tlm54gJG4kIOmYtuWNleS9jemYtSAkSV9uJA0KMi4gYGRpYWcoeCkgPC0gdmFsdWVgLCB2YWx1ZSDlj6/ku6XmmK/moIfph4/miJblkJHph48NCg0KYGBge3J9DQpkaWFnKDQpICMgbiDpmLbljZXkvY3pmLUNCmRpYWcoMCwgNCkgIyDlhaggMCDlm5vpmLbmlrnpmLUNCmRpYWcoMTAsIDMsIDQpICMgbnJvdyDlkowgbmNvbCDlj6/ku6XkuI3nm7jnrYkNCmRpYWcoMCwgMywgNCkgIyDku7vmhI8gc2l6ZSDnmoTlhaggMCDnn6npmLUNCmRpYWcoMCwgMywgNCkgKyAxICMg5Lu75oSPIHNpemUg55qE5YWoIDEg55+p6Zi1DQptYXRyaXgobnVtZXJpYygxMiksIG5yb3cgPSAzKSArIDEgIyDku7vmhI8gc2l6ZSDlhaggMSDnn6npmLXnmoTlj6bkuIDnp43lhpnms5UNCg0KeCA8LSBkaWFnKDE6NSkgIyBjcmVhdGUg5a+56KeS55+p6Zi1DQp4DQpkaWFnKHgpIDwtIDINCngNCmRpYWcoeCkgPC0gbGV0dGVyc1sxOjVdDQp4DQpgYGANCg0KIyMjIyDnn6npmLXovazljJbkuLrlkJHph48NCg0KYGFzLnZlY3RvcigpYCDmjInnhafkuIDliJfkuIDliJflnLDpobrluo/lsIbnn6npmLXlsZXlvIDkuLrlkJHph48NCg0KIyMjIFR5cGUNCg0KLSBgaXMubWF0cml4KClgIOWIpOaWrQ0KLSBgYXMubWF0cml4KHgpYCDovazmjaLvvIx45Li65pWw5o2u5qGG5pe277yM6Ieq5Yqo6L2s5o2i5Li65YW85a655omA5pyJ5YWD57Sg55qE44CB5pu054G15rS755qE5pWw5o2u57G75Z6LDQotIGBkYXRhLm1hdHJpeCh4KWAg6L2s5o2i5pWw5o2u5qGG77yM6Ieq5Yqo5bCG5omA5pyJ5YWD57Sg6L2s5o2i5Li65pWw5a2XDQoNCiMjIyBTaXplDQoNCmBucm93KEEpYCwgYG5jb2woQSlgIOS9nOeUqOS6juWQkemHj+aXtui/lOWbniBOVUxM77yM5YW25Y+Y5L2TIGBOUk9XKClgLCBgTkNPTCgpYCDlj6/kvZznlKjkuo7lkJHph4/vvIjlsIblhbbop4bkuLogJG5cdGltZXMxJCDnn6npmLXvvIkNCmBkaW0oQSlg77yM6L+U5Zue6ZW/5bqm5Li6IDIg55qE5ZCR6YePDQpgbGVuZ3RoKEEpYCDov5Tlm57nn6npmLXlhYPntKDnmoTkuKrmlbDvvIjnn6npmLXlsZXlvIDkuLrlkJHph4/nmoQgc2l6Ze+8iQ0KDQojIyMgTGFiZWwNCg0K5Zyo6buY6K6k5oOF5Ya15LiL77yM5Yib5bu655+p6Zi15pe25LiN5Lya6Ieq5Yqo5YiG6YWN6KGM5ZCN5ZKM5YiX5ZCN44CC5b2T5LiN5ZCM55qE6KGM5YiX5pyJ5LiN5ZCM55qE5ZCr5LmJ5pe277yMDQrkuLrlhbblkb3lkI3lsLHmmL7lvpflv4XopoHkuJTnm7Top4LjgIINCg0KIyMjIyDliJvlu7rnn6npmLXml7bkuLrooYzliJflkb3lkI0NCg0KYG1hdHJpeCgpYCDnmoQgZGltbmFtZXMg5Y+C5pWw77yM5Y+W5YC85Li6IGxpc3Qocm93X25hbWVfdmVjdG9yLCBjb2xfbmFtZV92ZWN0b3IpDQoNCiMjIyMg5Yib5bu655+p6Zi15ZCO5Li66KGM5YiX5ZG95ZCNDQoNCmByb3duYW1lcyhBKSBbPC1dYCDmj5Dlj5Yv6LWL5YC8DQoNCmBjb2xuYW1lcyhBKSBbPC1dYCDmj5Dlj5Yv6LWL5YC8DQoNCiMjIyBTdWJzZXQNCg0KIyMjIyDkuoznu7TpgInmi6nlmagNCg0KYFvooYzpgInmi6nlmagsIOWIl+mAieaLqeWZqF1gIOavj+S4qumAieaLqeWZqOmDveWPr+S7peaYr2luZGV444CBY29uZGl0aW9uIOWSjCBuYW1l77yb6Iul5LiA5Liq57u05bqm55qE5Y+C5pWw56m657y677yM5YiZ6K+l57u05bqm55qE5omA5pyJ5YC86YO95Lya6KKr6YCJ5Ye65p2lDQoNCioq55+p6Zi155qEYFtdYOmAieaLqeWZqOS8mui/lOWbnue7tOW6puWwveWPr+iDveS9jueahOe7k+aenCoq77yM5Zug5q2kYEFbMiwgXWDov5Tlm57nmoTmmK/lkJHph4/ogIzpnZ4kMVx0aW1lcyBuJOeahOefqemYteOAguWmguaenOS4jeaDs+mZjee7tO+8iOWNs+S9v+mAieaLqeS4gOWIl+S5n+imgeS/neaMgSBjbGFzcyDlsZ7mgKfkuLrnn6npmLXvvInvvIzpnIDopoHorr7nva4gZHJvcCDlj4LmlbAgYFvooYzpgInmi6nlmagsIOWIl+mAieaLqeWZqCwgZHJvcCA9IEZBTFNFXWANCg0KYGBge3J9DQpBIDwtIG1hdHJpeCgxOjE2LCA0KQ0KDQpBWzIsIF0gIyBB55qE56ysMuihjA0KDQpBWywgLTJdICMgQeaOkumZpOesrDLliJcNCg0KQVszLCAyXSAjIEHnmoTnrKwz6KGM56ysMuWIlw0KDQpBWzMsIGMoMiwgNCldICMgQeeahOesrDPooYznrKwy5YiX5ZKM56ysNOWIlw0KYGBgDQoNCiMjIyMg5LiA57u06YCJ5oup5ZmoDQoNCuefqemYteacrOi0qOS4iuaYr+S4gOS4quWQkemHj++8jOaJgOS7pemAgueUqOWQkemHj+eahOS4gOe7tOmAieaLqeWZqA0KDQpgYGB7cn0NCkEgPC0gbWF0cml4KDE6OSwgMykNCkFbQSA+IDNdDQpgYGANCg0KIyMjIyDnn6npmLXpgInmi6nlmagNCg0K5L2/55So55+p6Zi15L2c5Li66YCJ5oup5Zmo77yM55+p6Zi155qE5q+P5LiA6KGM5o+Q5L6b5aSa57u0IGluZGV477yM6YCJ5oup5LiA5Liq5YWD57Sg77yb5YiX5pWw5Yaz5a6a6YCJ5oup5YWD57Sg55qE5Liq5pWwDQoNCmBgYHtyfQ0KdmFscyA8LSBvdXRlcigxOjUsIDE6NSwgRlVOID0gInBhc3RlIiwgc2VwID0gIiwiKQ0KdmFscw0Kc2VsZWN0IDwtIG1hdHJpeChuY29sID0gMiwgYnlyb3cgPSBUUlVFLCBjKA0KICAxLCAxLA0KICAzLCAxLA0KICAyLCA0DQopKQ0Kc2VsZWN0DQp2YWxzW3NlbGVjdF0NCmBgYA0KDQojIyMgSW5kZXgNCg0KYHJvdyhBKWAsIGBjb2woQSlgIOi/lOWbnuS4pOS4quefqemYte+8jOWFg+e0oOWIhuWIq+S4uuihjOWIl+S4i+agh+OAgg0KDQpgYGB7cn0NCkEgPC0gbWF0cml4KDE6MTYsIDQpDQpBDQpyb3coQSkNCmNvbChBKQ0KDQojIOaPkOWPluS4i+S4ieinkuefqemYteeul+azlQ0KQVtyb3coQSkgPCBjb2woQSldIDwtIDANCkENCmBgYA0KDQojIyMgT3BlcmF0aW9uDQoNCiMjIyMg6L2s572uIGB0KEEpYA0KDQrlkJHph4/msqHmnInnu7TluqblsZ7mgKfvvIzkuI3mmK/nn6npmLXjgILopoHmiorlkJHph4/ovazljJbkuLogJDEgXHRpbWVzIG4kIOWSjCAkbiBcdGltZXMgMSQg55qE55+p6Zi177yM5Y+v5Lul55SoIGBkaW0oKWDvvIzkuZ/lj6/ku6XnlKggYHQoKWAsIGBhcy5tYXRyaXgoKWANCg0KYGBge3J9DQp4IDwtIDE6Ng0KDQphcy5tYXRyaXgoeCkgIyDmnIDnm7Top4INCnggJT4lIGBkaW08LWAoYyg2LCAxKSkNCnQodCh4KSkNCg0KeCAlPiUgYGRpbTwtYChjKDEsIDYpKQ0KdCh4KQ0KYGBgDQoNCuWvueaVsOaNruahhuS9v+eUqCBgdCgpYO+8jOS8muiHquWKqOWwhuWFtui9rOaNouS4uuefqemYtQ0KDQojIyMjIOefqemYteS5mOazlQ0KDQotICAgYEElKiVCYA0KICAgIC0gICDkuIDkuKrkvovlpJbvvJroi6UgQSDlkowgQiDlnYfkuLrliJflkJHph4/vvIzliJnov5Dnrpfml7boh6rliqjlr7kgQSDovaznva5bXui9rOe9rl3vvIzmiafooYwgYHQoQSklKiVCYO+8jOi/lOWbniBBIOS4jiBCIOeahOWGheenrw0KICAgIC0gYGNyb3NzcHJvZChBLCBCKWAg5pivIGB0KEEpICUqJSBCYCDnmoTnroDlhpkNCiAgICAtIGB0Y3Jvc3Nwcm9kKEEsIEIpYCDmmK8gYEEgJSolIHQoQilgIOeahOeugOWGmQ0KLSBgKmAsIOWTiOi+vumprOenrw0KLSBga3JvbmVja2VyKClgLCDlhYvnvZflhoXlhYvnp68NCg0KDQpgYGB7cn0NCiMg55+p6Zi15LmY5rOVDQptMSA8LSBtYXRyaXgoMTo5LCAzKQ0KbTEgJSolIG0xDQpgYGANCg0KW17ovaznva5dOiDoi6XkuI3ovaznva7vvIzov5nkuKrov5DnrpfmoLnmnKzml6Dms5Xov5vooYzjgIINCg0KIyMjIyDlr7nop5LlhYPntKANCg0KYGRpYWcoQSlgIOi/lOWbnuWvueinkuWFg+e0oOe7hOaIkOeahOWQkemHjw0KDQojIyMjIOefqemYteeahOmAhu+8m+e6v+aAp+aWueeoi+e7hOeahOinow0KDQotICAgYHNvbHZlKEEsIEIpYCwg6L+U5ZueYEEgJSolIFggPSBCYOeahOino+OAgg0KLSAgIGBzb2x2ZShBKWAsIOi/lOWbnuefqemYtUHnmoTpgIbvvIzljbNgU29sdmUoQSwgSSlgDQoNCiMjIyMg54m55b6B5YC85ZKM54m55b6B5ZCR6YePDQoNCmBBLmVpZ2VuIDwtIGVpZ2VuKEEsIHN5bW1ldHJpYz1UKWANCg0KIyMjIyDooYzliJflvI8NCg0KYGRldChBKWANCg0KIyMjIyDmj5Dlj5bkuIrjgIHkuIvkuInop5Lnn6npmLUNCg0KYGxvd2VyLnRyaShBLGRpYWc9VC9GKWDlkoxgdXBwZXIudHJpKEEsZGlhZz1UL0YpYO+8jOi/meS4pOS4quWHveaVsOi/lOWbnumAu+i+keefqemYtQ0KDQpgYGB7cn0NCkEgPC0gbWF0cml4KDE6MTYsIDQpDQpBDQpBW2xvd2VyLnRyaShBKV0gPC0gMCAjIEFbbG93ZXIudHJpKEEpXSDkuLrkuIDnu7TpgInmi6nlmajvvIzov5Tlm57lkJHph4/ogIzpnZ7nn6npmLUNCkENCmBgYA0KDQojIyMjIOato+WumuefqemYteeahENob2xlc2tleeWIhuinow0KDQpgY2hvbChBKWANCg0K5Y2z6L+U5Zue5ruh6LazICRBPVB7XlR9UCQg55qEUO+8jOWFtuS4rVDkuLrkuIrkuInop5Lnn6npmLUNCg0KIyMjIyDnn6npmLXlkIjlubYNCg0KYHJiaW5kKClgLCBgY2JpbmQoKWANCg0KYGBge3IsIGV2YWw9RkFMU0V9DQpyYmluZChBLCBCKQ0KY2JpbmQoQSwgQikNCmRwbHlyOjpiaW5kX3Jvd3MoQSwgQikNCmRwbHlyOjpiaW5kX2NvbHMoQSwgQikNCmBgYA0KDQojIyMjIOWvueihjOOAgeWIl+WIhuWIq+aTjeS9nA0KDQotIGBhcHBseShtYXRyaXgsIDEsIGYpYCDlsIbooYzkvp3mrKHkvKDpgJLnu5kgZg0KLSBgYXBwbHkobWF0cml4LCAyLCBmKWAg5bCG5YiX5L6d5qyh5Lyg6YCS57uZIGYNCi0gYHJvd1N1bXMoKWANCi0gYHJvd01lYW5zKClgDQotIGBjb2xTdW1zKClgDQotIGBjb2xNZWFucygpYA0KDQpgYGB7cn0NCkEgPC0gbWF0cml4KDE6MTYsIDQpDQpBDQoNCnJvd1N1bXMoQSkNCmFwcGx5KEEsIDEsIHN1bSkNCg0KY29sTWVhbnMoQSkNCmFwcGx5KEEsIDIsIG1lYW4pDQpgYGANCg0KIyMgQXJyYXkNCg0K5byg6YeP77yM5oiW5pu06auY57u05bqm55qE5ZCR6YePDQoNCiMjIyBDcmVhdGUNCg0KYHo8LWFycmF5KHZlY3RvciwgZGltZW5zaW9ucywgZGltbmFtZXMgPSBsaXN0KHYxLCB2MiwgdjMsIC4uLikpYA0KDQojIyMgTGFiZWwNCg0KYGRpbW5hbWVzKCkgWzwtXWAg5o+Q5Y+WL+i1i+WAvA0KDQpgYGB7cn0NCnogPC0gYXJyYXkoMToyNCwgZGltID0gYygyLCAzLCA0KSwgZGltbmFtZXMgPSBsaXN0KGMoInIxIiwgInIyIiksIGMoImMxIiwgImMyIiwgImMzIiksIGMoInAxIiwgInAyIiwgInAzIiwgInA0IikpKQ0Keg0KZGltbmFtZXMoeikNCmBgYA0KDQojIyMgU3Vic2V0DQoNCmBb56ysMee7tOmAieaLqeWZqCwg56ysMue7tOmAieaLqeWZqCwg56ysM+e7tOmAieaLqeWZqCwgLi4uXWANCg0KIyMgTGlzdA0KDQpsaXN0IOmAu+i+keS4iuaYr+S4gOe7hDxzcGFuIHN0eWxlID0gJ2NvbG9yOiBvcmFuZ2VyZWQnPioq5pyJ5bqPPC9zcGFuPumUruWAvOWvuSoq55qE6ZuG5ZCI77yI5bCx5YOPIEpTIOS4reeahOWvueixoe+8iQ0KDQrkvYblrp7njrDkuIrmmK/lub/kuYnlkJHph4/vvIjkvZzkuLogdmFsdWVz77yJ6ZmE5Yqg5LqGIGluZGV4IOaIliBuYW1lcyDlsZ7mgKfvvIjkvZzkuLoga2V5c++8iQ0KDQojIyMgQ3JlYXRlDQoNCiMjIyMg55u05o6l5a6a5LmJ5YiX6KGo5YaF5a65DQoNCmBsaXN0KG5hbWUxID0gdmFsdWUxLCBuYW1lMiA9IHZhbHVlMiwgLi4uKWDvvIzlj6/ku6XnnIHnlaUgbmFtZXMNCg0KIyMjIyDplb/luqbkuLogTiDnmoTnqbrliJfooagNCg0KYHZlY3Rvcihtb2RlID0gJ2xpc3QnLCBsZW5ndGggPSBOKWANCg0KUiDkuK3nmoQgdmVjdG9yIOWkqeeEtuS9k+eOsOedgOWQkemHj+eahOKAnOW5v+S5ieKAnQ0KDQojIyMgVHlwZQ0KDQotIGBpcy5saXN0KClgIOWIpOaWrQ0KLSBgYXMubGlzdCgpYCDovazmjaINCiAgIC0gYGFzLnZlY3RvcigpYOWvuWxpc3Tml6DmlYjvvIzlm6DkuLogbGlzdCDmmK/lub/kuYnlkJHph4/vvIwidmVjdG9yIuWMheWQq+S6hiJsaXN0Ig0KLSBgdW5saXN0KClgIOWwhuWIl+ihqOW8uuWItui9rOaNouS4uuWQkemHj+OAgioq55Sx5LqO6KeE5YiZ6L+H5LqO5aSN5p2C77yM5pyA5aW95LiN6KaB5L2/55So6K+l5Ye95pWwKioNCiAgIC0g5oyJ5YiG6YeP6aG65bqP5L6d5qyh5o6S5YiX77yMKirlvLrliLbkuI3lho3ltYzlpZcqKu+8gQ0KICAgLSDoh6rliqjkv53or4HlkIzmoLfnmoTmlbDmja7nsbvlnovjgILmr5TlpoLvvIzlvLrliLbovazmjaLmt7flkIjkuobmlbDlgLzlkozmlofmnKznmoTliJfooajvvIzkvJrlvpfliLDlrZfnrKbkuLLlkJHph48NCg0KYGBge3J9DQpsIDwtIGxpc3QoMSwgMiwgMykNCmwNCmFzLnZlY3RvcihsKQ0KYXMuaW50ZWdlcihsKQ0KdW5saXN0KGwpDQpgYGANCg0KIyMjIFNpemUNCg0KYGRpbShsaXN0KTwtYOWPr+S7peWIm+W7uuWIl+ihqOefqemYtQ0KDQpgYGB7cn0NCmwgPC0gbGlzdCgxOjMsICJhIiwgVFJVRSwgMS4wKQ0KZGltKGwpIDwtIGMoMiwgMikNCmwNCmxbWzEsIDFdXQ0KYGBgDQoNCiMjIyBMYWJlbA0KDQpgbmFtZXMobGlzdCkgWzwtXWAg5o+Q5Y+WL+i1i+WAvA0KDQrotYvlgLzkuLogTlVMTCDml7bnp7vpmaQgbmFtZXMg5bGe5oCn77yM5oiW6YCa6L+HIGB4IDwtIHVubmFtZSh4KWANCg0KIyMjIFN1YnNldA0KDQrnrKzkuIDnp43or63ms5XvvIznlKhgW11g56ym5Y+377yM6YeM6Z2i5Y+v5Lul5pivIGluZGV4L2NvbmRpdGlvbi9rZXkNCg0K56ys5LqM56eN6K+t5rOV77yM55SoIFxgW1xgKCkgIOaIliBgbWFncml0dHI6OmV4dHJhY3QoKWDlh73mlbANCg0KYGBge3J9DQpsIDwtIGxpc3QoImEiLCAyLCBUUlVFKQ0KbFsxXQ0KYFtgKGwsIDEpDQptYWdyaXR0cjo6ZXh0cmFjdChsLCAxKQ0KYGBgDQoNCuS4i+agh+i2iueVjOaXtu+8jOi/lOWbniBOVUxMDQoNCiMjIyBFeHRyYWN0DQoNCi0g56ys5LiA56eN6K+t5rOV77yM55SoYFtbXV1g56ym5Y+377yM6YeM6Z2i5Y+v5Lul5pivIGluZGV4L2NvbmRpdGlvbihsb2dpY2FsIHZlY3Rvcikva2V5DQotIOesrOS6jOenjeivreazle+8jOeUqGBsaXN0JGtleWDvvIzmmK9gbGlzdFtbJ2tleSddXWDnmoTor63ms5Xns5YNCiAgIC0g6IulICJrZXkiIOWCqOWtmOWcqOS4gOS4quWPmOmHjyB2YXIg5Lit77yMYGRmJHZhcmDnrYnku7fkuo5gZGZbWyJ2YXIiXV1g77yM5piv5peg5pWI55qE77yM5q2k5pe25Y+q5pyJYGRmW1t2YXJdXWDmiY3og73nlJ/mlYjjgILmiYDku6XvvIxgZGZbWyJrZXkiXV1g5oC75piv5q+UYGRmJGtleWDmm7Tkv53pmankuIDkupsNCiAgIC0gYCRg6IO96YOo5YiG5Yy56YWN5Y+Y6YeP5ZCN77yM6ICMYFtbXV1g5oC75piv5a6M5YWo57K+5YeG5Zyw5Yy56YWNDQotIOesrOS4ieenjeivreazle+8jOeUqCBcYFtbXGAoKSAg5oiWIGBtYWdyaXR0cjo6ZXh0cmFjdDIoKWDlh73mlbANCi0g56ys5Zub56eN6K+t5rOV77yM55SoYHB1cnJyOjpwbHVjaygueCwgLi4uLCAuZGVmYXVsdCA9IE5VTEwpYOaIlmBwdXJycjo6Y2h1Y2soLngsIC4uLilgDQogICAtIC4uLuWPr+S7peaYr+eUqOmAl+WPt+mXtOmalOeahOWkmuS4qm5hbWUvaW5kZXjvvIzpgILnlKjkuo7lr7nmt7HluqbltYzlpZfliJfooajvvIgqKuivu+WPliBKU09OIOaWh+S7tuaXtuW+iOW4uOingSoq77yJ55qE5o+Q5Y+WDQogICAtIOimgeaQnOe0oueahOWFg+e0oOS4jeWtmOWcqOaXtu+8jHBsdWNrKCkg6buY6K6k6L+U5ZueIE5VTEzvvIzogIwgY2h1Y2soKSDkvJrmipvlh7rplJnor68NCg0KYGBge3J9DQpsW1sxXV0NCmBbW2AobCwgMSkNCm1hZ3JpdHRyOjpleHRyYWN0MihsLCAxKQ0KDQoNCnggPC0gbGlzdCgNCiAgYSA9IGxpc3QoMSwgMiwgMyksDQogIGIgPSBsaXN0KDMsIDQsIDUpDQopDQpwdXJycjo6cGx1Y2soeCwgImEiLCAxKQ0KcHVycnI6OnBsdWNrKHgsICJjIiwgMSkNCnB1cnJyOjpwbHVjayh4LCAiYyIsIDEsIC5kZWZhdWx0ID0gTkEpDQpgYGANCg0KIyMjIE9wZXJhdGlvbg0KDQojIyMjIOaUueWPmOWFg+e0oA0KDQrlr7nnm7jlupTlhYPntKDnm7TmjqXotYvlgLwNCg0KIyMjIyDliKDpmaTlhYPntKANCg0K6LWL5YC85Li6IGBOVUxMYCDljbPkuLrliKDpmaQNCg0KIyMjIyDmt7vliqDlhYPntKANCg0K56ys5LiA56eN6K+t5rOV77yM5a+55paw5YWD57Sg6LWL5YC844CCDQoNCmBgYFINCiMg5re75Yqg5YWD57Sg55qE5pyA5L2z5YaZ5rOV77yM5peg6ZyA55+l6YGTIGluZGV4DQpsIDwtIGxpc3QoLi4uKQ0KbFtbbGVuZ3RoKGwpICsgMV1dIDwtIG5ld19lbGVtZW50DQpgYGANCg0K56ys5LqM56eN6K+t5rOV77yMYGFwcGVuZChsaXN0LCB2YWx1ZSwgYWZ0ZXIgPSBsZW5ndGgobGlzdCkpYO+8jOm7mOiupOWKoOWIsOWIl+ihqOeahOacq+WwvuOAguS9huiLpeaPkuWFpeeahOWFg+e0oOacrOi6q+aYr+S4gOS4quWIl+ihqO+8iOW+iOWkmuWvueixoeacrOi0qOS4iumDveaYr+S4gOS4quWIl+ihqO+8ie+8jOWImeS8mioq56C05Z2P5bGC57qn57uT5p6E77yM5bCG5omA5pyJ55qE5YWD57Sg5L6d5qyh5o+S5YWl5Yiw5YmN5LiA5Liq5YiX6KGoKirjgILmiYDku6Xoi6XopoHkv53lrZjliJfooajnmoTlsYLnuqfnu5PmnoTvvIzov5jmmK/nrKzkuIDnp43or63ms5Xmm7Tkv53pmanjgIINCg0KYGBge3J9DQpsW1s0XV0gPC0gZGF0YS50YWJsZSh4ID0gMSwgeSA9IDIpDQpsJHogPC0gYygib25lIiwgInR3byIsICJ0aHJlZSIpDQpsDQpsIDwtIGFwcGVuZChsLCA2KQ0KbA0KbCA8LSBhcHBlbmQobCwgbGlzdCg3LCA4KSkNCmwNCmxbWzldXSA8LSBsaXN0KDksIDEwKQ0KbA0KYGBgDQoNCiMjIERhdGEuRnJhbWUNCg0KIVtdKGh0dHBzOi8vZDMzd3VicmZraTBsNjguY2xvdWRmcm9udC5uZXQvYzVmZDI1NTUwYWEyYTgyZDI0ODMwNjljMWViNGRlNmEzYTFmNzYzZi9jODIxZi9kaWFncmFtcy92ZWN0b3JzL2RhdGEtZnJhbWUtMS5wbmcpDQoNCmRhdGEuZnJhbWUg5piv6ZW/5bqm55u45ZCM55qE5YiXKirlkJHph48qKu+8iOatpOWkhOWQkemHj+aYr+W5v+S5ieeahO+8jOWNs+WPr+S7peaYryBhdG9taWMgdmVjdG9yIOaIliBsaXN077yJ57uE5oiQ55qEIExpc3QuIA0KDQpSIOWOn+eUn+aUr+aMgeWQkemHj+WMluaTjeS9nO+8jOWboOatpCBSIOaTjeS9nOaVsOaNruahhuS4reeahOWQkemHj+acieWFiOWkqeS8mOWKv++8jOivreazleeugOa0geOAgg0KDQrlkIzml7bvvIxkYXRhLmZyYW1lIOWPr+S7peWDj+efqemYteS4gOagt++8jOS7peS6jOe7tOihqOaWueW8j+WRiOeOsOOAguWboOatpO+8jCoqUiDkuK3mk43kvZznn6npmLXnmoTkuIDkupvvvIjms5vlnovvvInlh73mlbDlhbzlrrnkuoYgZGF0YS5mcmFtZSDlr7nosaEqKu+8jOWNs+WPr+S7peWDj+aTjeS9nOefqemYteS4gOagt+aTjeS9nCBkYXRhLmZyYW1lDQoNCiMjIyBDcmVhdGUNCg0KYGRhdGEuZnJhbWUodmFyMSA9IGNvbDEsIHZhcjIgPSBjb2wyLCDigKYsIHJvdy5uYW1lcyA9IE5VTEwsIGNoZWNrLm5hbWVzID0gVFJVRSwgc3RyaW5nc0FzRmFjdG9ycyA9IEZBTFNFKWANCg0KMS4gUiA0LjAg5LmL5YmN77yM5p6E5bu6UueahOWOn+eUn+aVsOaNruahhuaXtu+8jOWPguaVsCBzdHJpbmdzQXNGYWN0b3JzIOeahOm7mOiupOWAvOS4uiBUUlVF77yM5a2X56ym5ZCR6YeP6buY6K6k6KKr6L2s5o2i5oiQ5Zug5a2Q77yI5Zug5a2Q55qEIGxldmVsIOebuOavlOWtl+espuS4suiKguecgeWCqOWtmOepuumXtO+8ie+8jOaVsOaNruexu+Wei+WPmOS4uiBudW1lcmlj77yM5peg5rOV5YaN55So5a2X56ym5Liy5Ye95pWw5aSE55CG44CCNC4wIOWQjuabtOaUueS6hui/meS4gOm7mOiupOWAvOOAgg0KDQoyLiBjaGVjay5uYW1lcyDpu5jorqTkuLogVFJVRe+8jOW7uueri+aVsOaNruahhuaXtuS8muS9v+eUqOWHveaVsCBgbWFrZS5uYW1lcygpYCDmo4Dmn6Xlj5jph4/lkI3vvIzlsIYgUiDkuI3lhYHorrjlh7rnjrDlnKjlj5jph4/lkI3kuK3nmoTnibnmrorlrZfnrKbovazmjaLkuLpgLmDvvIzlpoLlsIbliJflkI0gYFBvcHVsYXRpb24oYmVmb3JlKWAg6Ieq5Yqo6L2s5o2i5Li6IGBQb3B1bGF0aW9uLmJlZm9yZS5gDQogICAxLiDoi6XpgIkgRkFMU0XvvIzkvJrmnIDlpKfpmZDluqblnLDkv53nlZnljp/mnKznmoTliJflkI3jgILkvYborr/pl67ov5nkupvlnKggUiDkuK3mnKzkuLrpnZ7ms5XnmoTliJfml7bvvIzlv4XpobvnlKjlj43lvJXlj7flsIbliJflkI3mi6zotbfmnaXvvIzlvaLlpoIgcmVzdWx0cyRcYFBvcHVsYXRpb24oYmVmb3JlKVxgDQoNCiMjIyMgbGlzdCBjb2x1bW5zDQoNCmBgYHtyfQ0KIyDliJvlu7rmlbDmja7moYblkI7mt7vliqANCmRmIDwtIGRhdGEuZnJhbWUoeCA9IDE6MykNCmRmJHkgPC0gbGlzdCgxOjIsIDE6MywgMTo0KQ0KZGYNCg0KIyDmiJbnlKggSSgpIOWMheijue+8jOihqOekuuS4jeS8muiHquWKqOi9rOaNog0KZGF0YS5mcmFtZSgNCiAgeCA9IDE6MywgDQogIHkgPSBJKGxpc3QoMToyLCAxOjMsIDE6NCkpDQopDQpgYGANCg0KIyMjIyBNYXRyaXggYW5kIGRhdGEgZnJhbWUgY29sdW1ucw0KDQromb3nhLYgUiDlhYHorrjlsIbnn6npmLXlkowgZGF0YSBmcmFtZSDkvZzkuLrliJfvvIzkvYbmnIDlpb3kuI3opoHov5nmoLfkvb/nlKjvvIzlm6DkuLrlvojlpJrlh73mlbDpu5jorqTmr4/kuIDliJfpg73mmK/lkJHph4/vvIzkuI3lhbzlrrnov5nnp43nvZXop4HnmoTmg4XlhrUNCg0KYGBge3J9DQpkZm0gPC0gZGF0YS5mcmFtZSgNCiAgeCA9IDE6MyAqIDEwDQopDQpkZm0keSA8LSBtYXRyaXgoMTo5LCBucm93ID0gMykNCmRmbSR6IDwtIGRhdGEuZnJhbWUoYSA9IDM6MSwgYiA9IGxldHRlcnNbMTozXSwgc3RyaW5nc0FzRmFjdG9ycyA9IEZBTFNFKQ0KDQpzdHIoZGZtKQ0KZGZtDQpgYGANCg0KIyMjIFR5cGUNCg0KLSBgYXMuZGF0YS5mcmFtZSgpYCDlsIbnn6npmLXjgIHliJfooajlvLrliLbovazmjaLkuLrmlbDmja7moYYNCiAgIC0g5aaC5p6c55+p6Zi15bey5pyJ6KGM44CB5YiX5ZCN77yM5Lya5Zyo6L2s5o2i6L+H56iL5Lit5L+d55WZDQoNCiMjIyBMYWJlbA0KDQrpgILnlKjkuo4gbWF0cml4IOeahGByb3duYW1lcygpYOWSjGBjb2xuYW1lcygpYOS5n+mAgueUqOS6juaVsOaNruahhuOAgg0KDQrkvYYqKnJvd25hbWVzIOS4jeaYr+S4gOS4quWlveeahOiuvuiuoe+8jOWujOWFqOWPr+S7peWwhuWFtuS9nOS4uuaVsOaNruahhueahOS4gOWIl++8jOWwvemHj+S4jeimgeeUqCoq44CCDQoNCmBgYHtyfQ0KYSA8LSBsaXN0KGlkID0gMTo1LCBsb3dlciA9IGxldHRlcnNbMTo1XSwgdXBwZXIgPSBMRVRURVJTWzE6NV0pDQpjbGFzcyhhKQ0KY29sbmFtZXMoYSkNCg0KYiA8LSBhcy5kYXRhLmZyYW1lKGEpDQpjbGFzcyhiKQ0KY29sbmFtZXMoYikNCmBgYA0KDQojIyMgU3Vic2V0DQoNCuaXouWPr+S7peeUqOWIl+ihqOmjjuagvOeahGBbXWDvvIzkuZ/lj6/ku6XnlKjnn6npmLXpo47moLznmoRgW3Jvd1NlbGVjdG9yLCBjb2x1bW5TZWxlY3Rvcl1gDQoNCjEuICDnn6npmLXpo47moLzpgInmi6nlmajnmoTlpb3lpITlnKjkuo7vvIzlj6/ku6XngbXmtLvlnLAqKuetm+mAieihjCoqDQoNCmBgYHtyfQ0KZGYgPC0gZGF0YS5mcmFtZSgNCiAgaWQgPSAxOjUsDQogIGxvd2VyID0gbGV0dGVyc1sxOjVdLA0KICB1cHBlciA9IExFVFRFUlNbMTo1XQ0KKQ0KDQojIOefqemYtemjjuagvOeahOmAieaLqeWZqA0KZGZbZGYkaWQgPiAzLCBjKDIsIDMpXQ0KYGBgDQoNCjIuICDnlKjnn6npmLXpo47moLznmoTkuoznu7TpgInmi6nlmajml7bvvIzot5/nn6npmLXkuIDmoLfkvJrlsL3lj6/og73pmY3nu7QNCiAgIDEuIOWmguaenOe6teWQkeWPquWPluS6huS4gOWIl++8jOWImei/lOWbnuWAvOS8muiHquWKqOeugOWMluS4uuWQkemHj++8jOiAjOmdnuaVsOaNruahhuOAgg0KICAgMi4g6Iul6KaB6YG/5YWN6ZmN57u077yM5L+d55WZ5pWw5o2u5qGG57uT5p6E77yM5Y+v5Lul57uT5ZCI5Lik56eN6aOO5qC855qE6YCJ5oup5Zmo77yM5Lmf5Y+v5Lul5aKe5Yqg6YCJ6aG5YGRyb3AgPSBGQUxTRWDjgIINCiAgIDMuICoq5pyA5aW95piv55SoIGRwbHlyIOS4reeahOWHveaVsOabv+S7o+mAieaLqeWZqCoq77yM55SoIGBzZWxlY3QoKWAg5pe25LiN5Lya6ZmN57u077yM5aaC5p6c5biM5pyb6ZmN57u05YaN55SoIGBwdWxsKClgIOWNs+WPr++8jOivreS5ieW+iOaYjuaZsOOAgg0KDQpgYGB7cn0NCiMjIOS/neeVmeaVsOaNruahhg0KZGZbMjozLCAyLCBkcm9wID0gRkFMU0VdDQpkZlsyOjMsIF1bMl0gIyDmt7flkIjkuKTnp43pgInmi6nlmagNCmRmWzI6MywgXSAlPiUgc2VsZWN0KDIpDQoNCiMg5LiN5L+d55WZ5pWw5o2u5qGGDQpkZlsyOjMsIDJdDQpkZlsyOjMsIF0gJT4lIHNlbGVjdCgyKSAlPiUgcHVsbCgpDQpgYGANCg0KMy4gIGBzdWJzZXQoZGYsIGNvbmRpdGlvbnMsIHNlbGVjdClgDQoNCioq5Ye95pWw6ICM6Z2e5pON5L2c56ym77yM5L6/5YipIFBpcGVsaW5lIOeahOi/nue7reaTjeS9nCoqDQoNCuesrOS4gOS4quWPguaVsOS4uuaVsOaNrumbhu+8jOesrOS6jOS4quWPguaVsOmAieaLqeespuWQiOadoeS7tueahOihjO+8jOesrOS4ieS4quWPguaVsHNlbGVjdOmAieaLqeWIl++8jOWPr+S7peWcqOWIl+WQjeWJjeWKoCctJ+WIoOmZpOS5iw0KDQpgYGB7ciwgZXZhbD1GQUxTRX0NCnN1YnNldChsZWFkZXJzaGlwLCBhZ2UgPj0gMzUgfCBhZ2UgPCAyNCwgc2VsZWN0ID0gYyhxMSwgcTIsIHEzLCBxNCkpDQpgYGANCg0KIyMjIEV4dHJhY3QNCg0KLSBgZGYkY29sbmFtZWANCi0gYGRmW1tpbmRleF1dYA0KLSBgZGZbWyJjb2xuYW1lIl1dYA0KLSDnn6npmLXpo47moLzpgInmi6nlmajvvIzpgInmi6nkuIDliJcNCi0gYGRwbHlyOjpwdWxsKGRmLCBjb2xuYW1lKWANCg0KYGBge3J9DQpkZiRsb3dlcg0KDQpkZltbMl1dDQoNCmRmW1sibG93ZXIiXV0NCg0KZGZbLCAyXQ0KDQpkcGx5cjo6cHVsbChkZiwgbG93ZXIpDQpgYGANCg0KIyMjIE9wZXJhdGlvbg0KDQrlr7nmlbDmja7moYbnmoTnsr7nu4bmk43kvZzmmK8gUiDmnIDmoLjlv4PnmoTlhoXlrrnvvIzkuYvlkI7ljZXliJfkuIDnq6Dor7TmmI7jgIINCg0KIyMjIyDlop7liKDmlLkNCg0K57G75Ly8IGxpc3TjgIFtYXRyaXjvvIzku6XotYvlgLzkuLrmoLjlv4PjgIINCg0KIyMjIyDmlbDmja7moYblkIjlubYNCg0KYHJiaW5kKClgLCBgY2JpbmQoKWANCg0KIyMjIyDmj4/ov7Dnu5/orqENCg0KYHN1bW1hcnkoKWAg5o+P6L+w57uf6K6h5ZCE5YiX5pWw5o2uDQoNCmBgYHtyfQ0Kc3VtbWFyeShtdGNhcnMpDQpgYGANCg0KIyMgdGliYmxlDQoNCmRhdGEuZnJhbWUg55qE5LyY5YyW5pu/5Luj57G75Z6L77yM5L2GKirlt7LmnInmm7Tlpb3nmoTmm7/ku6PnsbvlnosgZGF0YS50YWJsZe+8jOaJgOS7pSB0aWJibGUg5LiN5YaN6YeN6KaBKioNCg0KdGliYmxlIOaJk+WNsOaXtg0KDQotIOWIl+WHuuS6huWPmOmHj+eahOexu+Weiw0KLSDlj6rmmL7npLoxMOihjA0KLSDlj6rmmL7npLrmnInpmZDnmoTliJfmlbDvvIjkuI7lsY/luZXpgILlupTnmoTvvIkNCi0g6auY5LquIGBOQXNgDQoNCiMjIyBDcmVhdGUNCg0KdGliYmxlIOacieS4gOS4quW+iOeqgeWHuueahOS8mOeCue+8muWIm+W7uuaXtu+8jOWGmeWcqOWQjumdoueahOWPmOmHj+WPr+S7peeri+WNs+S9v+eUqOWJjemdoueahOWPmOmHjw0KDQpgYGB7cn0NCiMg6L+Z56eN5YaZ5rOV5aaC5p6c55SoIGRhdGEudGFibGXvvIzkvJrmiqXplJnvvIzooajnpLrkuI3nn6XpgZMgYiDlrprkuYnlvI/kuK3nmoQgYSDmmK/ku4DkuYgNCnRpYmJsZSgNCiAgYSA9IHJ1bmlmKDEwMDAsIDAsIDUpLA0KICBiID0gNCArIHJub3JtKDEwMDAsIG1lYW4gPSAzLjIgKiBhLCBzZCA9IDEpDQopICU+JSBoZWFkKCkNCmBgYA0KDQrmlbDmja7ph4/kuI3lpKfml7bvvIzlj6/ku6XnlKhgdHJpYmJsZSgpYOWIm+W7ug0KDQpgYGB7cn0NCmRmIDwtIHRyaWJibGUoDQogIH54LCB+eSwgfnosDQogICJhIiwgMiwgMy42LA0KICAiYiIsIDEsIDguNQ0KKQ0KYGBgDQoNCiMjIyBUcmFuc2Zlcg0KDQpgYXNfdGliYmxlKClgDQoNCiMjIyBTdWJzZXQNCg0Kc3Vic2V0IOaXtu+8jOWNs+S9v+mAieWPluWNleihjOaIluWNleWIl++8jOe7k+aenOS5n+S4jeS8mumZjee7tO+8jOS7jeeEtuaYryB0aWJibGUNCg0KIyMjIE9wZXJhdGlvbg0KDQpgYGB7cn0NCmFkZF9jb2x1bW4oZGYsIHcgPSAwOjEpICMg5aKe5Yqg5LiA5YiXDQphZGRfcm93KGRmLCB4ID0gImMiLCB5ID0gOSwgeiA9IDIuMSkgIyDlop7liqDkuIDooYwNCmFkZF9yb3coZGYsIHggPSAiYyIsIHkgPSA5LCB6ID0gMi4xLCAuYmVmb3JlID0gMikgIyDlnKjnrKzkuozooYzvvIzlop7liqDkuIDooYwNCmBgYA0KDQoxLiBgcHJpbnQodGliYmxlLCBuID0gMTAsIHdpZHRoID0gSW5mKWDlj6/ku6Xoh6rlrprkuYnmiZPljbDnmoTplb/luqblkozlrr3luqbjgILpu5jorqTlj6rmmL7npLoxMOihjO+8jOmBv+WFjei+k+WHuuWkqumVvy4NCiAgIDEuIOS5n+WPr+S7peeUqGBvcHRpb25zKHRpYmJsZS5wcmludF9tYXg9biwgdGliYmxlLnByaW50X21pbj1tKWDov5vooYzlhajlsYDmgKforr7nva7vvJrlpoLmnpzlpJrkuo5t6KGM77yM5YiZ5pyA5aSa5omT5Y2w5Ye6buihjOOAgg0KMi4g5a+55LqO5b6I5aSn55qE5pWw5o2u6KGo77yM5Lmf5Y+v5Lul55SoYCU+JSBWaWV3KClg5oiWYCVUPiUgVmlldygpYOafpeeciw0KMy4gdGliYmxlIOS4jeaUr+aMgeihjOWQjeOAgmB0aWJibGU6OnJvd25hbWVzX3RvX2NvbHVtbihkZiwgdmFyID0gInJvd25hbWUiKWDlj6/ku6XlsIbooYzlkI3ovazljJbkuLrkuIDliJfvvIxgdGliYmxlOjpyb3dpZF90b19jb2x1bW4oZGYsIHZhciA9ICJyb3dpZCIpYOWwhuihjCBpbmRleCDovazljJbkuLrkuIDliJfjgII=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("0202-Combined-Data-Structure.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
